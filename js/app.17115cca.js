(function(){"use strict";var t={2901:function(t,e,a){var s=a(144),i=a(998),o=function(){var t=this,e=t._self._c;return e(i.Z,[e("router-view")],1)},n=[],l={name:"App"},r=l,c=a(1001),d=(0,c.Z)(r,o,n,!1,null,null,null),u=d.exports,h=a(1705);s.ZP.use(h.Z);var _=new h.Z({}),m=a(9669),g=a.n(m);const p=g().create({baseURL:"https://api.dayangtong.cn:8080",timeout:3e3});p.interceptors.request.use((function(t){return sessionStorage.getItem("token")&&(t.headers["Authorization"]=sessionStorage.getItem("token")),t}),(function(t){return Promise.reject(t)})),p.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)}));var x=p,f=(a(6699),a(8345)),v=a(4562),b=a(4145),k=a(4886),y=a(266),Z=a(2118),w=a(3059),q=a(2933),I=a(3305),C=a(1713),S=a(9258),$=a(3687),z=a(7808),j=function(){var t=this,e=t._self._c;return e(w.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text))]),e(Z.Z,[e(C.Z,{staticStyle:{height:"90vh"},attrs:{align:"center",justify:"center"}},[e(y.Z,{attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e(b.Z,{attrs:{elevation:"24",color:"rgba(255, 255, 255, 0.9)"}},[e(k.EB,{staticClass:"flex-column justify-center"},[e("div",[e("img",{staticStyle:{width:"50px"},attrs:{src:a(1784)}})]),e("div",[t._v("大杨通物业云管家")])]),e(k.Qq,{staticClass:"text-center"},[t._v(" -- 专业易用的物业云管理平台 -- ")]),e(k.ZB,[e(z.Z,{attrs:{autofocus:"",clearable:"",outlined:"","prepend-inner-icon":"mdi-account",label:"用 户 名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),e(z.Z,{attrs:{type:t.show?"text":"password","append-icon":t.show?"mdi-eye":"mdi-eye-off",outlined:"","prepend-inner-icon":"mdi-key",label:"密 码"},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e(k.h7,[e($.Z),e(v.Z,{staticClass:"float-right",attrs:{loading:t.loading,color:"primary"},on:{click:t.login}},[t._v(" 登 录 ")])],1)],1)],1)],1)],1),e("div",{staticClass:"footer d-flex justify-center align-center"},[e("div",{staticStyle:{"margin-right":"20px"}},[e("h1",[t._v("DAYANGTONG.CN")])]),e("div",{staticStyle:{"margin-right":"20px",color:"#bbb"}},[e("div",[t._v("版权所有：大杨通网络科技有限公司")]),e("div",[t._v("销售咨询：183 - 0681 - 7521 售后服务：183 - 0681 - 7521")])]),e("img",{staticStyle:{"margin-right":"20px"},attrs:{src:a(2075)}}),e("img",{staticStyle:{"margin-right":"20px"},attrs:{src:a(2075)}})]),e(q.Z,{attrs:{value:t.loading}},[e(I.Z,{attrs:{indeterminate:"",size:"64",color:"primary"}})],1)],1)},B=[],E={name:"LoginView",data:()=>({show:!1,snackbar:{show:!1,text:"",color:"success"},loading:!1,form:{}}),methods:{login(){this.form.username&&this.form.password?(this.loading=!0,this.$axios.post("/user/login",this.form).then((t=>{console.log(t.data),t.data.token?(sessionStorage.setItem("token",t.data.token),sessionStorage.setItem("userid",t.data.userid),sessionStorage.setItem("nickname",t.data.nickname),sessionStorage.setItem("company",JSON.stringify(t.data.company)),setTimeout((()=>{this.loading=!1,this.$router.push("/home")}),2e3)):setTimeout((()=>{this.loading=!1,this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}}),1e3)})).catch((t=>{this.snackbar={show:!0,text:t,color:"error"},this.loading=!1}))):this.snackbar={show:!0,text:"用户名和密码不能为空！",color:"error"}}}},P=E,D=(0,c.Z)(P,j,B,!1,null,"5ff07112",null),T=D.exports,A=a(6232),M=a(5550),L=a(4324),O=a(9709),N=a(626),F=a(762),J=a(7953),R=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100vh",display:"flex"}},[e(O.Z,{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e("my-navigationdrawer")],1),e(A.Z,{attrs:{dense:"",dark:"",color:"primary",app:""},scopedSlots:t._u([{key:"extension",fn:function(){return[e(F.Z,[e(N.Z,{attrs:{to:"/home"}},[t._v(" 首页 ")]),t._l(t.$store.state.tabs,(function(a,s){return e(N.Z,{key:s,attrs:{to:a.link}},[t._v(" "+t._s(a.name)+" "),e(v.Z,{staticClass:"tab_close",attrs:{"x-small":"",icon:""},on:{click:function(e){return e.preventDefault(),t.tab_close_btn(s)}}},[e(L.Z,{attrs:{"x-small":""}},[t._v("mdi-close")])],1)],1)}))],2)]},proxy:!0}])},[e(M.Z,{on:{click:function(e){t.drawer=!t.drawer}}}),e(J.qW,[t._v(t._s(t.title))]),e($.Z),e(v.Z,{attrs:{text:""},on:{click:t.logout}},[t._v("退出")])],1),e(w.Z,[e(Z.Z,{staticClass:"d-flex",staticStyle:{height:"100%"},attrs:{fluid:""}},[e("keep-alive",[e("router-view",{key:t.$route.path})],1)],1)],1)],1)},V=[],Y=a(5808),U=a(7397),X=a(4525),K=a(9471),Q=a(4611),H=function(){var t=this,e=t._self._c;return e(Y.Z,[e(X.Z,[e(Q.Z,[e(L.Z,{attrs:{color:"red"}},[t._v("mdi-dialpad")])],1),e(K.km,[e(K.V9,{staticClass:"text-h6"},[t._v(" 大杨通 ")])],1)],1),t._l(t.items,(function(a){return e(U.Z,{key:a._id,attrs:{"prepend-icon":a.icon,"no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[e(K.km,[e(K.V9,{domProps:{textContent:t._s(a.name)}})],1)]},proxy:!0}],null,!0),model:{value:a.active,callback:function(e){t.$set(a,"active",e)},expression:"item.active"}},t._l(a.children,(function(a){return e(X.Z,{key:a.name,attrs:{to:a.link},on:{click:function(e){return t.add_tab(a)}}},[e(K.km,[e(K.V9,{domProps:{textContent:t._s(a.name)}})],1)],1)})),1)}))],2)},W=[],G={data:()=>({items:[{_id:"0",icon:"mdi-cog",name:"系统管理",link:"/xitongguanli",children:[{_id:"1",icon:"mdi-cog",name:"系统设置",link:"/xitongguanli/xitongshezhi"},{_id:"2",icon:"mdi-cog",name:"授权管理",link:"/xitongguanli/shouquanguanli"},{_id:"3",icon:"mdi-cog",name:"模块管理",link:"/xitongguanli/mokuaiguanli"},{_id:"4",icon:"mdi-cog",name:"企业管理",link:"/xitongguanli/qiyeguanli"},{_id:"5",icon:"mdi-cog",name:"权限设置",link:"/xitongguanli/quanxianshezhi"},{_id:"6",icon:"mdi-cog",name:"用户管理",link:"/xitongguanli/yonghuguanli"},{_id:"6",icon:"mdi-cog",name:"合作申请",link:"/xitongguanli/join"}]}]}),methods:{add_tab(t){-1==this.$store.state.tabs.indexOf(t)&&this.$store.state.tabs.push(t)},async getlist(){const t=await this.$axios.get("user/getuserinfo");this.$axios.get("navigation").then((e=>{"admin"==t.data.username?this.items=[...e.data,...this.items]:this.items=e.data}))}},created(){this.getlist()}},tt=G,et=(0,c.Z)(tt,H,W,!1,null,null,null),at=et.exports,st={name:"layoutView",data:()=>({drawer:!0,title:("null"==sessionStorage.company?"公司简称":JSON.parse(sessionStorage.company).qiyejiancheng)+"【"+sessionStorage.nickname+"】"}),methods:{tab_close_btn(t){if(console.log("当前keepalive缓存页面"),console.log(this.$children[2].$children[0].$vnode.parent.componentInstance.cache),console.log("即将清除页面："+this.$store.state.tabs[t].link),delete this.$children[2].$children[0].$vnode.parent.componentInstance.cache[this.$store.state.tabs[t].link],console.log("清除完成，剩余keepalive缓存页面"),console.log(this.$children[2].$children[0].$vnode.parent.componentInstance.cache),1==this.$store.state.tabs.length&&"/home"!=this.$route.path)this.$router.push("/");else if(this.$route.path==this.$store.state.tabs[t].link){var e=0;e=t==this.$store.state.tabs.length-1?this.$store.state.tabs.length-2:this.$store.state.tabs.length-1;var a=this.$store.state.tabs[e].link;this.$router.push(a)}this.$store.state.tabs.splice(t,1)},get_home_info(){},logout(){sessionStorage.clear(),this.$store.state.tabs=[],this.$router.push("/login")}},components:{"my-navigationdrawer":at},beforeCreate(){sessionStorage.token||this.$router.push("/login")},mounted(){this.get_home_info()}},it=st,ot=(0,c.Z)(it,R,V,!1,null,"41ad6e28",null),nt=ot.exports,lt=a(9592),rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column",staticStyle:{flex:"1"}},[e("div",[e(lt.Z,{attrs:{indeterminate:"",active:t.loading}}),e(C.Z,[e(y.Z,[e(F.Z,[e(N.Z,{on:{click:function(e){return t.get_home_info("all")}}},[t._v("汇总")]),t._l(t.xiaoqu_items,(function(a,s){return e(N.Z,{key:s,on:{click:function(e){return t.get_home_info(a._id)}}},[t._v(t._s(a.name)+" ")])}))],2)],1)],1),e(C.Z,[e(y.Z,{attrs:{cols:"12",md:"3"}},[e(b.Z,{staticClass:"red lighten-2",attrs:{dark:""}},[e(k.EB,[t._v("小区公告（本周）")]),e(k.ZB,{staticClass:"text-center text-h3 font-weight-bold"},[e("span",[t._v(t._s(t.notice_num))])]),e(k.h7,{staticClass:"justify-end"},[t._v("条")])],1)],1),e(y.Z,{attrs:{cols:"12",md:"3"}},[e(b.Z,{staticClass:"teal lighten-2",attrs:{dark:""}},[e(k.EB,[t._v("报事报修（本周）")]),e(k.ZB,{staticClass:"text-center text-h3 font-weight-bold"},[e("span",[t._v(t._s(t.report_num))])]),e(k.h7,{staticClass:"justify-end"},[t._v("件")])],1)],1),e(y.Z,{attrs:{cols:"12",md:"3"}},[e(b.Z,{staticClass:"green lighten-2",attrs:{dark:""}},[e(k.EB,[t._v("巡逻次数（本周）")]),e(k.ZB,{staticClass:"text-center text-h3 font-weight-bold"},[e("span",[t._v(t._s(t.sheet_num))])]),e(k.h7,{staticClass:"justify-end"},[t._v("条")])],1)],1),e(y.Z,{attrs:{cols:"12",md:"3"}},[e(b.Z,{staticClass:"purple lighten-2",attrs:{dark:""}},[e(k.EB,[t._v("访客登记（本周）")]),e(k.ZB,{staticClass:"text-center text-h3 font-weight-bold"},[e("span",[t._v(t._s(t.visitor_num))])]),e(k.h7,{staticClass:"justify-end"},[t._v("人")])],1)],1)],1)],1),e("div",{staticClass:"d-flex flex-column",staticStyle:{flex:"1",margin:"24px 0"}},[e(C.Z,[e(y.Z,{attrs:{cols:"12",md:"9"}},[e("ComponentEchart",{attrs:{echart_option:t.echart_month_bill_option}})],1),e(y.Z,{attrs:{cols:"12",md:"3"}},[e(b.Z,{staticStyle:{height:"100%"}},[e(k.EB,[t._v("今日收费统计")]),e(k.ZB,{staticClass:"text-h6"},[0!=t.today_bill.length?t._l(t.today_bill,(function(a,s){return e("p",{key:s,staticStyle:{color:"#1976d2"}},[t._v(t._s(a._id)+" : "+t._s(a.total.toFixed(2)))])})):[e("p",[t._v("暂无收费数据")])]],2)],1)],1)],1)],1)])},ct=[],dt=function(){var t=this,e=t._self._c;return e(b.Z,{staticStyle:{height:"100%"}},[e(k.ZB,{ref:"chart",staticStyle:{height:"100%"}})],1)},ut=[],ht=a(8645),_t={props:["echart_option"],data(){return{chart:null}},watch:{echart_option:{handler:function(t){console.log(t),this.drawer()},deep:!0}},methods:{drawer(){null!=this.chart&&""!=this.chart&&void 0!=this.chart||(this.chart=ht.S1(this.$refs.chart));var t={title:{text:(new Date).getMonth()+1+"月缴费金额趋势"},legend:{top:20},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"red"}}},grid:{left:"0%",right:"0%",bottom:"0%",containLabel:!0},xAxis:{data:this.echart_option.xAxis_data},yAxis:{},series:this.echart_option.series};this.chart.setOption(t,!0),window.onresize=()=>{this.chart.resize()}}}},mt=_t,gt=(0,c.Z)(mt,dt,ut,!1,null,null,null),pt=gt.exports,xt={components:{ComponentEchart:pt},data:()=>({loading:!1,xiaoqu_items:[],notice_num:0,sheet_num:0,visitor_num:0,report_num:0,today_bill:[],echart_month_bill_option:{}}),mounted(){this.get_home_info("all"),this.get_xiaoqu()},methods:{get_xiaoqu(){this.$axios.get("/xiaoqu/getlist").then((t=>{this.xiaoqu_items=t.data}))},async get_home_info(t){this.loading=!0;const e=await this.get_this_month_bill(t),a=await this.get_top_num(t),s=await this.get_today_bill(t);setTimeout((()=>{this.echart_month_bill_option=e,this.notice_num=a.notice_num,this.sheet_num=a.sheet_num,this.visitor_num=a.visitor_num,this.report_num=a.report_num,this.today_bill=s,this.loading=!1}),500)},async get_top_num(t){const e=await this.$axios.get("/home/index",{params:{xiaoqu_id:t}});return e.data},async get_today_bill(t){const e=await this.$axios.get("/shoukuandan/today_bill_info",{params:{xiaoqu_id:t}});return e.data},async get_this_month_bill(t){const e=await this.$axios.get("/shoukuandan/echart_month_bill_info",{params:{xiaoqu_id:t}});console.log(e.data);var a=[],s=new Date((new Date).getFullYear(),(new Date).getMonth(),0).getDate();for(let n=1;n<s+1;n++)a.push(n);var i=[...new Set(e.data.map((t=>t._id[0])))],o={xAxis_data:a,series:[]};return i.forEach(((t,s)=>{o.series.push({type:"line",smooth:!0,areaStyle:{},emphasis:{focus:"series"},stack:"Total",name:t,data:[]}),a.forEach(((a,i)=>{a<=(new Date).getDate()&&(o.series[s].data[i]=0,e.data.forEach((e=>{t==e._id[0]&&a==e.day&&(o.series[s].data[i]=e.total)})))}))})),console.log(o),o}}},ft=xt,vt=(0,c.Z)(ft,rt,ct,!1,null,null,null),bt=vt.exports,kt=a(5125),yt=a(9884),Zt=a(6072),wt=function(){var t=this,e=t._self._c;return e(b.Z,{staticStyle:{overflow:"auto"}},[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(k.EB,[t._v("系统设置（第三方平台）")]),e(k.ZB,[e(C.Z,[e(y.Z,{attrs:{cols:"12",md:"6"}},[e(kt.Z,[e(z.Z,{attrs:{label:"系统名称"},model:{value:t.form.sitename,callback:function(e){t.$set(t.form,"sitename",e)},expression:"form.sitename"}}),e(z.Z,{attrs:{label:"app_id"},model:{value:t.form.wechat.appid,callback:function(e){t.$set(t.form.wechat,"appid",e)},expression:"form.wechat.appid"}}),e(z.Z,{attrs:{label:"app_secret"},model:{value:t.form.wechat.appsecret,callback:function(e){t.$set(t.form.wechat,"appsecret",e)},expression:"form.wechat.appsecret"}}),e(z.Z,{attrs:{label:"token"},model:{value:t.form.wechat.token,callback:function(e){t.$set(t.form.wechat,"token",e)},expression:"form.wechat.token"}}),e(z.Z,{attrs:{label:"encodingAESKey"},model:{value:t.form.wechat.encodingAESKey,callback:function(e){t.$set(t.form.wechat,"encodingAESKey",e)},expression:"form.wechat.encodingAESKey"}}),e("span",[t._v("验证票据："+t._s(t.form.wechat.component_verify_ticket))]),e("br"),e("span",[t._v("系统_Access_Token:"+t._s(t.form.wechat.component_access_token))]),e("br"),e("span",[t._v("Token有效期(秒):"+t._s(t.form.wechat.expires_in))]),e("br"),e("span",[t._v("上次更新Token时间:"+t._s(new Date(t.form.wechat.update_time)))]),e("br"),e("span",[t._v("上次getTime:"+t._s(new Date(t.form.wechat.update_time).getTime()/1e3))]),e("br"),e("span",[t._v("本次getTime:"+t._s((new Date).getTime()/1e3))]),e("br"),e("span",[t._v("Token有效时间剩余:"+t._s(t.expires_time))]),e("br"),e(yt.Z,{attrs:{label:"系统状态: "+(1==t.form.sitestatus?"开启":"关闭")},model:{value:t.form.sitestatus,callback:function(e){t.$set(t.form,"sitestatus",e)},expression:"form.sitestatus"}}),e(Zt.Z,{directives:[{name:"show",rawName:"v-show",value:!t.form.sitestatus,expression:"!form.sitestatus"}],attrs:{label:"关闭后提示给用户的信息"},model:{value:t.form.site_error,callback:function(e){t.$set(t.form,"site_error",e)},expression:"form.site_error"}})],1)],1),e(y.Z,{attrs:{cols:"12",md:"6"}},[e(Zt.Z,{attrs:{label:"关于我们"},model:{value:t.form.aboutus,callback:function(e){t.$set(t.form,"aboutus",e)},expression:"form.aboutus"}})],1)],1)],1),e(k.h7,[e(v.Z,{attrs:{color:"primary"},on:{click:t.submit}},[t._v(" 保 存 ")]),e(v.Z,{staticClass:"ml-5",attrs:{color:"primary"},on:{click:function(e){return t.get_data()}}},[t._v(" 刷 新 ")])],1)],1)},qt=[],It={data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},form:{wechat:{}}}),computed:{expires_time:function(){return this.form.wechat.expires_in-((new Date).getTime()-new Date(this.form.wechat.update_time).getTime())/1e3}},methods:{get_data(){this.$axios.get("/config").then((t=>{t.data&&(this.form=t.data)})).catch((t=>{this.snackbar={show:!0,text:t,color:"error"}}))},post_data(){this.$axios.post("/config/update",this.form).then((t=>{console.log(t.data),this.snackbar={show:!0,text:t.data.msg,color:"success"}})).catch((t=>{this.snackbar={show:!0,text:t,color:"error"}}))},submit(){this.post_data(),this.get_data()}},mounted(){this.get_data()}},Ct=It,St=(0,c.Z)(Ct,wt,qt,!1,null,"1321d581",null),$t=St.exports,zt=a(629),jt=a(4061),Bt=a(1625),Et=a(5495),Pt=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"5000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(y.Z,[e(b.Z,{attrs:{cols:"12",md:"12"}},[e(k.EB,[t._v("授权账号管理 "),e($.Z),e(v.Z,{staticClass:"mr-5",attrs:{color:"primary"},on:{click:t.get_data}},[t._v("刷新")]),e(v.Z,{staticClass:"mr-5",attrs:{color:"primary"},on:{click:t.auth}},[t._v("新增授权")])],1),e(k.ZB,[e(jt.Z,{attrs:{"max-width":"500px",persistent:"","retain-focus":!1},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v("操作"+t._s(t.edit_authorizer_appid))])]),e(k.ZB,[e(z.Z,{attrs:{label:t.dialog_field_label},model:{value:t.edit_appid,callback:function(e){t.edit_appid=e},expression:"edit_appid"}})],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.save(t.edit_authorizer_appid,t.edit_appid)}}},[t._v(" "+t._s(t.btn_bind_unbind_save_title)+" ")])],1)],1)],1),e(zt.Z,{attrs:{headers:t.headers,items:t.items,"item-key":"_id","show-expand":"","single-expand":""},scopedSlots:t._u([{key:"item.type",fn:function({item:a}){return[a.authorizer_info.MiniProgramInfo?e("span",[t._v("小程序")]):e("span",[t._v("公众号")])]}},{key:"item.authorizer_info.nick_name",fn:function({item:a}){return[e("span",[t._v(t._s(a.authorizer_info.nick_name)+"_")]),a.authorizer_info.MiniProgramInfo?e("span",[t._v("小程序")]):e("span",[t._v("公众号")])]}},{key:"item.authorizer_info.head_img",fn:function({item:t}){return[e(Et.Z,{attrs:{src:t.authorizer_info.head_img,"max-width":"50"}})]}},{key:"item.open_appid_action",fn:function({item:a}){return[e(v.Z,{attrs:{small:"",text:"",color:"success"},on:{click:function(e){return t.create_open_app(a.authorizer_appid)}}},[t._v("创建")]),e(v.Z,{attrs:{small:"",text:"",color:"blue-grey"},on:{click:function(e){return t.get_open_app(a.authorizer_appid)}}},[t._v("获取")]),e("div"),e(v.Z,{attrs:{small:"",text:"",color:"primary"},on:{click:function(e){return t.bind_dialog(a.authorizer_appid)}}},[t._v("绑定")]),e(v.Z,{attrs:{small:"",text:"",color:"error"},on:{click:function(e){return t.unbind_dialog(a.authorizer_appid)}}},[t._v("解绑")])]}},{key:"item.wxapp_code_action",fn:function({item:a}){return[a.authorizer_info.MiniProgramInfo?[e(v.Z,{attrs:{small:"",text:"",color:"success"},on:{click:function(e){return t.commit(a.authorizer_appid)}}},[t._v("上传")]),e(v.Z,{attrs:{small:"",text:"",color:"blue-grey"},on:{click:function(e){return t.getTrialQRCode(a.authorizer_appid)}}},[t._v("体验")]),e("div"),e(v.Z,{attrs:{small:"",text:"",color:"primary"},on:{click:function(e){return t.setPrivacySetting(a.authorizer_appid)}}},[t._v("设置隐私指引")]),e("div"),e(v.Z,{attrs:{small:"",text:"",color:"error"},on:{click:function(e){return t.submit_audit(a.authorizer_appid)}}},[t._v("提审")]),e(v.Z,{attrs:{small:"",text:"",color:"blue-grey"},on:{click:function(e){return t.getLatestAuditStatus(a.authorizer_appid)}}},[t._v("查询")]),e(v.Z,{attrs:{small:"",text:"",color:"primary"},on:{click:function(e){return t.release(a.authorizer_appid)}}},[t._v("发布")])]:t._e()]}},{key:"item.linkminiprogram",fn:function({item:a}){return[a.authorizer_info.MiniProgramInfo?t._e():e(v.Z,{attrs:{small:"",text:"",color:"primary"},on:{click:function(e){return t.linkMiniprogram(a.authorizer_appid)}}},[t._v("关联")]),e("div",[t._v(t._s(a.linkminiprogram))])]}},{key:"item.set_menu",fn:function({item:a}){return[a.authorizer_info.MiniProgramInfo?t._e():e(v.Z,{attrs:{small:"",color:"primary"},on:{click:function(e){return t.set_menu(a.authorizer_appid)}}},[t._v("设置 ")])]}},{key:"expanded-item",fn:function({headers:a,item:s}){return[e("td",{attrs:{colspan:a.length}},[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"6"}},[e("p",{staticClass:"caption"},[t._v("【调用令牌】"+t._s(s.authorizer_access_token))]),e("p",{staticClass:"caption"},[t._v("【调用令牌有效期】"+t._s(s.expires_in)+" | 剩余有效期："+t._s(s.expires_in-((new Date).getTime()-new Date(s.update_time).getTime())/1e3))]),e("p",{staticClass:"caption"},[t._v("【刷新令牌】"+t._s(s.authorizer_refresh_token))]),e(v.Z,{attrs:{color:"primary",small:"",text:""},on:{click:function(e){return t.modifyServerDomain(s.authorizer_appid)}}},[t._v("配置小程序服务器域名 ")]),e(v.Z,{attrs:{color:"primary",small:"",text:""},on:{click:function(e){return t.get_authorizer_info(s.authorizer_appid)}}},[t._v("更新授权账号详情 ")]),e("p",{staticClass:"caption"},[t._v("【公众号/小程序类型】"+t._s(s.authorizer_info.service_type_info))]),e("p",{staticClass:"caption"},[t._v("【公众号/小程序认证类型】"+t._s(s.authorizer_info.verify_type_info))]),e("p",{staticClass:"caption"},[t._v("【主体名称】"+t._s(s.authorizer_info.principal_name))]),e("p",{staticClass:"caption"},[t._v("【帐号介绍】"+t._s(s.authorizer_info.signature))]),s.authorizer_info.MiniProgramInfo?e("p",{staticClass:"caption"},[t._v(" 【小程序配置信息】"+t._s(s.authorizer_info.MiniProgramInfo))]):t._e(),e("p",{staticClass:"caption"},[t._v("【帐号状态】"+t._s(s.authorizer_info.account_status))]),e(Et.Z,{staticStyle:{margin:"0 auto"},attrs:{width:"250",src:"https://api.dayangtong.cn:8080/"+s.qr_code_img}}),e(Bt.Z,{attrs:{placeholder:"上传二维码"},on:{change:function(e){return t.post_qr_code(s)}},model:{value:s.qr_code_img,callback:function(e){t.$set(s,"qr_code_img",e)},expression:"item.qr_code_img"}})],1),s.authorizer_info.MiniProgramInfo?e(y.Z,[e("p",[t._v("【普通二维码跳转规则】")]),e("p",[t._v("https://api.dayangtong.cn:8080/"+t._s(s.authorizer_appid))])]):e(y.Z,{attrs:{cols:"12",sm:"6"}},[e("p",[t._v("【模板消息】")]),e(v.Z,{attrs:{color:"primary",small:"",text:""},on:{click:function(e){return t.get_all_private_template(s.authorizer_appid)}}},[t._v("获取模板列表 ")]),s.template?e("div",[s.template.template_list?e("div",t._l(s.template.template_list,(function(a){return e("div",{key:a.template_id,staticStyle:{"border-bottom":"solid"}},[e("p",[t._v(t._s(a.title))]),e("p",[t._v(t._s(a.template_id))]),e("p",[t._v(t._s(a.content))]),e("p",[t._v(t._s(a.example))])])})),0):e("div",[t._v(t._s(s.template))])]):t._e()],1)],1)],1)]}}],null,!0)})],1)],1)],1)],1)},Dt=[],Tt={data:()=>({snackbar:{show:!1,text:"",color:"success"},headers:[{text:"open_appid",value:"open_appid"},{text:"appid",value:"authorizer_appid"},{text:"头像",value:"authorizer_info.head_img"},{text:"昵称",value:"authorizer_info.nick_name"},{text:"授权状态",value:"status"},{text:"开放平台",value:"open_appid_action",align:"center"},{text:"代码操作",value:"wxapp_code_action",align:"center"},{text:"关联小程序",value:"linkminiprogram",align:"center"},{text:"菜单",value:"set_menu"},{text:"",value:"data-table-expand"}],dialog:!1,btn_bind_unbind_save_title:"",edit_appid:"",dialog_field_label:"",edit_authorizer_appid:"",items:[]}),methods:{get_data(){this.$axios.get("/weixin/authorizedaccount").then((t=>{t.data&&(this.items=t.data)}))},auth(){this.$axios.post("/weixin/get_auth_url").then((t=>{console.log(t),window.open("https://api.dayangtong.cn:8080/weixin/auth?auth_url="+encodeURIComponent(t.data),"_blank")}))},set_menu(t){this.dialog=!0,this.btn_bind_unbind_save_title="创建菜单",this.dialog_field_label="菜单中展示的小程序的appid",this.edit_authorizer_appid=t},create_open_app(t){this.$axios.post("/weixin/mp/open/create",{authorizer_appid:t}).then((t=>{console.log(t),0==t.data.errcode&&this.get_data(),this.snackbar={show:!0,text:t.data.errmsg}}))},get_open_app(t){this.$axios.post("/weixin/mp/open/get",{authorizer_appid:t}).then((t=>{console.log(t),0==t.data.errcode&&this.get_data(),this.snackbar={show:!0,text:t.data.errmsg}}))},bind_dialog(t){this.dialog=!0,this.btn_bind_unbind_save_title="绑定",this.dialog_field_label="绑定的开放平台的appid",this.edit_authorizer_appid=t},unbind_dialog(t){this.dialog=!0,this.btn_bind_unbind_save_title="解绑",this.dialog_field_label="解绑的开放平台的appid",this.edit_authorizer_appid=t},close(){this.dialog=!1,this.edit_appid="",this.dialog_field_label="",this.edit_authorizer_appid="",this.btn_bind_unbind_save_title=""},save(t,e){"绑定"==this.btn_bind_unbind_save_title?this.$axios.post("/weixin/mp/open/bind",{authorizer_appid:t,open_appid:e}).then((t=>{console.log(t),0==t.data.errcode&&this.get_data(),this.close(),this.snackbar={show:!0,text:t.data.errmsg}})):"解绑"==this.btn_bind_unbind_save_title?this.$axios.post("/weixin/mp/open/unbind",{authorizer_appid:t,open_appid:e}).then((t=>{console.log(t),0==t.data.errcode&&this.get_data(),this.dialog_unbind=!1,this.snackbar={show:!0,text:t.data.errmsg}})):"关联"==this.btn_bind_unbind_save_title?this.$axios.post("/weixin/mp/open/linkminiprogram",{authorizer_appid:t,miniprogram_appid:e}).then((t=>{console.log(t),this.get_data(),this.snackbar={show:!0,text:t.data.errmsg}})):"创建菜单"==this.btn_bind_unbind_save_title?this.$axios.post("/weixin/mp/menu/create",{authorizer_appid:t,miniprogram_appid:e}).then((t=>{console.log(t),this.snackbar={show:!0,text:t.data.errmsg}})):"上传代码并生成体验版"==this.btn_bind_unbind_save_title&&this.$axios.post("/weixin/wxapp/commit",{authorizer_appid:t,template_id:e}).then((t=>{console.log(t.data),this.snackbar={show:!0,text:t.data.msg}})),this.close()},commit(t){this.dialog=!0,this.btn_bind_unbind_save_title="上传代码并生成体验版",this.dialog_field_label="代码库中的代码模板 ID",this.edit_authorizer_appid=t},getTrialQRCode(t){let e=document.createElement("a");e.setAttribute("download","qrcode"),e.href="https://api.dayangtong.cn:8080/weixin/wxapp/getTrialQRCode?authorizer_appid="+t,e.click()},setPrivacySetting(t){this.$axios.post("/weixin/wxapp/setPrivacySetting",{authorizer_appid:t}).then((t=>{console.log(t.data),this.snackbar={show:!0,text:t.data.errmsg}}))},submit_audit(t){this.$axios.post("/weixin/wxapp/submit_audit",{authorizer_appid:t}).then((t=>{console.log(t.data),this.snackbar={show:!0,text:t.data.errmsg}}))},getLatestAuditStatus(t){this.$axios.post("/weixin/wxapp/getLatestAuditStatus",{authorizer_appid:t}).then((t=>{console.log(t.data),this.snackbar={show:!0,text:t.data.msg}}))},release(t){this.$axios.post("/weixin/wxapp/release",{authorizer_appid:t}).then((t=>{console.log(t.data),this.snackbar={show:!0,text:t.data.msg}}))},linkMiniprogram(t){this.dialog=!0,this.btn_bind_unbind_save_title="关联",this.dialog_field_label="关联的小程序的appid",this.edit_authorizer_appid=t},modifyServerDomain(t){this.$axios.post("/weixin/mp/modifyServerDomain",{authorizer_appid:t}).then((t=>{console.log(t.data),this.snackbar={show:!0,text:t.data.errmsg}}))},get_authorizer_info(t){this.$axios.post("/weixin/mp/get_authorizer_info",{authorizer_appid:t}).then((t=>{console.log(t.data),this.get_data(),this.snackbar={show:!0,text:"更新成功",color:"success"}}))},get_all_private_template(t){this.$axios.post("/weixin/mp/open/get_all_private_template",{authorizer_appid:t}).then((t=>{console.log(t),this.get_data()}))},post_qr_code(t){const e=new FormData;e.append("qr_code_img",t.qr_code_img),e.append("authorizer_appid",t.authorizer_appid),this.$axios.post("/weixin/mp/open/qr_code_img",e).then((e=>{t.qr_code_img=e.data.qr_code_img}))}},mounted(){this.get_data()}},At=Tt,Mt=(0,c.Z)(At,Pt,Dt,!1,null,"7d87efd1",null),Lt=Mt.exports,Ot=a(9223),Nt=a(2339),Ft=a(6313),Jt=a(1583),Rt=function(){var t=this,e=t._self._c;return e(C.Z,[e(y.Z,{attrs:{cols:"12"}},[e(b.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(Ft.Z,{attrs:{flat:""}},[e(J.qW,[t._v("模块管理"),e("span",{staticClass:"text-caption"},[t._v(" 图标获取地址(mdi-[name]):"),e("a",{attrs:{target:"_blank",href:"https://materialdesignicons.com/"}},[t._v("https://materialdesignicons.com/")])])]),e($.Z),e(v.Z,{staticClass:"mb-2",attrs:{color:"primary"},on:{click:t.add}},[t._v(" 新增模块 ")])],1),e(k.ZB,{staticClass:"d-flex"},[e("div",{staticStyle:{height:"75vh",overflow:"auto"}},[e(Jt.Z,{attrs:{transition:"",items:t.items,"item-key":"_id"},scopedSlots:t._u([{key:"label",fn:function({item:a}){return[e(v.Z,{attrs:{color:"primary",text:""},on:{click:function(e){return t.edit(a)}}},[e(L.Z,{attrs:{small:""}},[t._v(t._s(a.icon))]),t._v(t._s(a.name)+"("+t._s(a.sort)+") ")],1)]}}])})],1),e(Ot.Z,{staticClass:"mr-5",attrs:{vertical:""}}),e(kt.Z,{staticClass:"flex-grow-1",attrs:{disabled:t.disabled}},[e(z.Z,{attrs:{label:"排序"},model:{value:t.edit_item.sort,callback:function(e){t.$set(t.edit_item,"sort",e)},expression:"edit_item.sort"}}),e(z.Z,{attrs:{label:"名称"},model:{value:t.edit_item.name,callback:function(e){t.$set(t.edit_item,"name",e)},expression:"edit_item.name"}}),e(z.Z,{attrs:{label:"图标"},model:{value:t.edit_item.icon,callback:function(e){t.$set(t.edit_item,"icon",e)},expression:"edit_item.icon"}}),e(z.Z,{attrs:{label:"链接"},model:{value:t.edit_item.link,callback:function(e){t.$set(t.edit_item,"link",e)},expression:"edit_item.link"}}),e(Nt.Z,{attrs:{items:t.parents,label:"上级菜单"},model:{value:t.edit_item.parent,callback:function(e){t.$set(t.edit_item,"parent",e)},expression:"edit_item.parent"}}),e(v.Z,{staticClass:"mr-4",attrs:{disabled:t.disabled,color:"primary"},on:{click:t.save}},[t._v(" "+t._s(t.save_text)+" ")]),e(v.Z,{staticClass:"mr-4",attrs:{disabled:t.disabled,color:"error"},on:{click:t.cancel}},[t._v(" 取消 ")]),e(v.Z,{staticClass:"float-right",attrs:{disabled:t.disabled,color:"error"},on:{click:t.del}},[t._v(" 删除 ")])],1)],1)],1)],1)],1)},Vt=[],Yt={data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},edit_item:{},disabled:!0,save_text:"保存",items:[]}),computed:{parents:function(){var t=[{value:"",text:"顶级模块"}];return this.items.forEach((e=>{t.push({value:e._id,text:e.name})})),t}},created(){this.getlist()},methods:{getlist(){this.$axios.get("navigation").then((t=>{this.items=t.data}))},edit(t){this.disabled=!0,this.edit_item={},this.save_text="保存",setTimeout((()=>{this.edit_item=t,this.disabled=!1}),500)},add(){this.disabled=!0,this.edit_item={},this.save_text="新增",setTimeout((()=>{this.disabled=!1}),500)},save(){"新增"==this.save_text?this.$axios.post("navigation/create",this.edit_item).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"},this.disabled=!0,this.edit_item={},this.getlist()})):(console.log(this.edit_item._id!=this.edit_item.parent),this.edit_item._id!=this.edit_item.parent_id?this.$axios.post("navigation/update",this.edit_item).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"},this.getlist(),this.disabled=!0,this.edit_item={}})):this.snackbar={show:!0,text:"不允许设置自己为自己的上级菜单",color:"error"})},cancel(){this.disabled=!0,this.edit_item={},this.getlist()},del(){this.$axios.post("navigation/del",this.edit_item).then((t=>{console.log(t),this.disabled=!0,this.edit_item={},this.snackbar={show:!0,text:t.data.message,color:"success"},this.getlist()}))}}},Ut=Yt,Xt=(0,c.Z)(Ut,Rt,Vt,!1,null,null,null),Kt=Xt.exports,Qt=a(1030),Ht=function(){var t=this,e=t._self._c;return e(zt.Z,{staticClass:"elevation-2",staticStyle:{flex:"1"},attrs:{headers:t.headers,items:t.items,"sort-by":"daoqishijian"},scopedSlots:t._u([{key:"top",fn:function(){return[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(Ft.Z,{attrs:{flat:""}},[e(J.qW,[t._v("企业列表")]),e($.Z),e(jt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary"}},"v-btn",s,!1),a),[t._v(" 新增 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(k.ZB,[e(Z.Z,[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(z.Z,{attrs:{label:"企业全称"},model:{value:t.editedItem.qiyequancheng,callback:function(e){t.$set(t.editedItem,"qiyequancheng",e)},expression:"editedItem.qiyequancheng"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"企业简称"},model:{value:t.editedItem.qiyejiancheng,callback:function(e){t.$set(t.editedItem,"qiyejiancheng",e)},expression:"editedItem.qiyejiancheng"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(jt.Z,{attrs:{width:"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(z.Z,t._g({attrs:{readonly:"",label:"到期时间"},model:{value:t.editedItem.daoqishijian,callback:function(e){t.$set(t.editedItem,"daoqishijian",e)},expression:"editedItem.daoqishijian"}},a))]}}]),model:{value:t.date_picker_dialog,callback:function(e){t.date_picker_dialog=e},expression:"date_picker_dialog"}},[e(Qt.Z,{attrs:{locale:"zh-cn"},on:{input:function(e){t.date_picker_dialog=!1}},model:{value:t.editedItem.daoqishijian,callback:function(e){t.$set(t.editedItem,"daoqishijian",e)},expression:"editedItem.daoqishijian"}})],1)],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"公众号appid"},model:{value:t.editedItem.mp_appid,callback:function(e){t.$set(t.editedItem,"mp_appid",e)},expression:"editedItem.mp_appid"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"小程序appid"},model:{value:t.editedItem.mini_appid,callback:function(e){t.$set(t.editedItem,"mini_appid",e)},expression:"editedItem.mini_appid"}})],1),e(y.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(z.Z,{attrs:{label:"商户号"},model:{value:t.editedItem.mchid,callback:function(e){t.$set(t.editedItem,"mchid",e)},expression:"editedItem.mchid"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"联系人"},model:{value:t.editedItem.lianxiren,callback:function(e){t.$set(t.editedItem,"lianxiren",e)},expression:"editedItem.lianxiren"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"联系电话"},model:{value:t.editedItem.lianxidianhua,callback:function(e){t.$set(t.editedItem,"lianxidianhua",e)},expression:"editedItem.lianxidianhua"}})],1)],1)],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 保存 ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.mchid",fn:function({item:a}){return[a.mchid?e("span",{staticClass:"green--text"},[t._v(t._s(a.mchid))]):t._e()]}},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")])]}}],null,!0)})},Wt=[],Gt={data:()=>({snackbar:{show:!1,text:"",color:"success"},dialog:!1,date_picker_dialog:!1,headers:[{text:"id",sortable:!1,value:"_id"},{text:"企业全称",sortable:!1,value:"qiyequancheng"},{text:"企业简称",sortable:!1,value:"qiyejiancheng"},{text:"公众号appid",sortable:!1,value:"mp_appid"},{text:"小程序appid",sortable:!1,value:"mini_appid"},{text:"商户号mchid",sortable:!1,value:"mchid"},{text:"联系人",sortable:!1,value:"lianxiren"},{text:"联系电话",sortable:!1,value:"lianxidianhua"},{text:"到期时间",value:"daoqishijian"},{text:"编辑/删除",align:"center",sortable:!1,value:"actions"}],items:[],editedIndex:-1,editedItem:{qiyequancheng:"",qiyejiancheng:"",mp_appid:"",mini_appid:"",mchid:"",lianxiren:"",lianxidianhua:"",daoqishijian:(new Date).toISOString().substr(0,10)},defaultItem:{qiyequancheng:"",qiyejiancheng:"",mp_appid:"",mini_appid:"",mchid:"",lianxiren:"",lianxidianhua:"",daoqishijian:(new Date).toISOString().substr(0,10)}}),computed:{formTitle(){return-1===this.editedIndex?"添加":"编辑"}},watch:{dialog(t){t||this.close()}},created(){this.getlist()},methods:{getlist(){this.$axios.get("/company/getlist").then((t=>{t.data.forEach((t=>{t.daoqishijian=t.daoqishijian.substr(0,10)})),this.items=t.data}))},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},save(){this.editedIndex>-1?this.$axios.post("/company/update",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}})):this.$axios.post("/company/create",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))}}},te=Gt,ee=(0,c.Z)(te,Ht,Wt,!1,null,null,null),ae=ee.exports,se=function(){var t=this,e=t._self._c;return e(zt.Z,{staticClass:"elevation-2",staticStyle:{flex:"1"},attrs:{headers:t.headers,items:t.items,"sort-by":"daoqishijian"},scopedSlots:t._u([{key:"top",fn:function(){return[e(S.Z,{attrs:{app:"",top:"",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(Ft.Z,{attrs:{flat:""}},[e(J.qW,[t._v("权限列表")]),e($.Z),e(jt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary"}},"v-btn",s,!1),a),[t._v(" 新增 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(k.ZB,[e(Z.Z,[e(C.Z,[e(y.Z,{attrs:{cols:"12"}},[e(z.Z,{attrs:{label:"角色"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(y.Z,{attrs:{cols:"12"}},[e("div",{staticStyle:{height:"50vh",overflow:"auto"}},[e(Jt.Z,{attrs:{transition:"","return-object":"",items:t.navigation_items,"item-key":"_id",selectable:""},model:{value:t.editedItem.navigation,callback:function(e){t.$set(t.editedItem,"navigation",e)},expression:"editedItem.navigation"}})],1)])],1)],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 保存 ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.navigation",fn:function({item:a}){return t._l(a.navigation,(function(a){return e("span",{key:a._id},[t._v("【"+t._s(a.name)+"】")])}))}},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(L.Z,{staticClass:"mr-2",attrs:{color:"error",small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})},ie=[],oe={data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},dialog:!1,headers:[{text:"id",sortable:!1,value:"_id"},{text:"角色名称",sortable:!1,value:"name"},{text:"权限模块",sortable:!1,value:"navigation"},{text:"编辑/删除",align:"center",sortable:!1,value:"actions"}],items:[],editedIndex:-1,navigation_items:[],editedItem:{}}),computed:{formTitle(){return-1===this.editedIndex?"添加":"编辑"}},watch:{dialog(t){t||this.close()}},created(){this.$axios.get("/navigation").then((t=>{this.navigation_items=t.data})),this.getlist()},methods:{getlist(){this.$axios.get("/permission").then((t=>{this.items=t.data}))},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem={},this.editedIndex=-1}))},deleteItem(t){this.$axios.post("/permission/del",t).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))},save(){this.editedIndex>-1?this.$axios.post("/permission/update",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}})):this.$axios.post("/permission/create",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))}}},ne=oe,le=(0,c.Z)(ne,se,ie,!1,null,null,null),re=le.exports,ce=a(2016),de=function(){var t=this,e=t._self._c;return e(zt.Z,{staticClass:"elevation-2",staticStyle:{flex:"1"},attrs:{headers:t.headers,items:t.items,"item-key":"_id"},scopedSlots:t._u([{key:"top",fn:function(){return[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(Ft.Z,{attrs:{flat:""}},[e(J.qW,[t._v("用户列表")]),e(ce.Z,{staticClass:"mx-5",attrs:{rounded:"",dense:"",mandatory:""},model:{value:t.filter_status,callback:function(e){t.filter_status=e},expression:"filter_status"}},[e(v.Z,{attrs:{small:""}},[t._v(" 可用 ")]),e(v.Z,{attrs:{small:""}},[t._v(" 禁用 ")])],1),e($.Z),e(jt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary"}},"v-btn",s,!1),a),[t._v(" 注册 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(k.ZB,[e(Z.Z,[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"账号"},model:{value:t.editedItem.username,callback:function(e){t.$set(t.editedItem,"username",e)},expression:"editedItem.username"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"密码"},model:{value:t.editedItem.password,callback:function(e){t.$set(t.editedItem,"password",e)},expression:"editedItem.password"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"姓名"},model:{value:t.editedItem.nickname,callback:function(e){t.$set(t.editedItem,"nickname",e)},expression:"editedItem.nickname"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(Nt.Z,{attrs:{items:t.company_items,"item-text":"qiyejiancheng","item-value":"_id",label:"企业"},model:{value:t.editedItem.company,callback:function(e){t.$set(t.editedItem,"company",e)},expression:"editedItem.company"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(Nt.Z,{attrs:{items:t.permission_items,"item-text":"name","item-value":"_id",label:"权限"},model:{value:t.editedItem.permission,callback:function(e){t.$set(t.editedItem,"permission",e)},expression:"editedItem.permission"}})],1)],1)],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 保存 ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.status",fn:function({item:a}){return[e(yt.Z,{on:{change:function(e){return t.change_status(a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"item.status"}})]}},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")])]}}],null,!0)})},ue=[],he={data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},filter_status:0,dialog:!1,company_items:[],permission_items:[],items:[],editedIndex:-1,editedItem:{username:"",password:"",nickname:"",company:null,permission:null,status:!0},defaultItem:{username:"",password:"",nickname:"",company:null,permission:null,status:!0}}),computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"},headers(){return[{text:"id",sortable:!1,value:"_id"},{text:"账号",sortable:!1,value:"username"},{text:"密码",sortable:!1,value:"password"},{text:"姓名",sortable:!1,value:"nickname"},{text:"企业",sortable:!1,value:"company.qiyejiancheng"},{text:"权限",sortable:!1,value:"permission.name"},{text:"状态",sortable:!1,value:"status",filter:t=>this.filter_status?!t:t},{text:"编辑/删除",align:"center",sortable:!1,value:"actions"}]}},watch:{dialog(t){t||this.close()}},created(){this.getlist(),this.$axios.get("/company/getlist").then((t=>{this.company_items=t.data})),this.$axios.get("/permission").then((t=>{this.permission_items=t.data}))},methods:{getlist(){this.$axios.get("/user/lists").then((t=>{this.items=t.data}))},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},change_status(t){this.$axios.post("/user/update",t).then((t=>{this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))},save(){this.editedIndex>-1?this.$axios.post("/user/update",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}})):this.$axios.post("/user/add",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))}}},_e=he,me=(0,c.Z)(_e,de,ue,!1,null,null,null),ge=me.exports,pe=function(){var t=this,e=t._self._c;return e(C.Z,[e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"12",md:"12"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v("合作申请列表")]),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.join_items,"item-key":"_id",loading:t.table_loading,options:t.options,"server-items-length":t.total_num,height:"66vh"},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}}],null,!0)})],1)],1)],1)],1)},xe=[],fe={data:()=>({options:{},total_num:0,table_loading:!1,join_items:[],headers:[{text:"时间",sortable:!1,value:"date"},{text:"姓名",sortable:!1,value:"nickname"},{text:"电话",sortable:!1,value:"phone"},{text:"详情",sortable:!1,value:"content"}]}),watch:{options:{handler(){this.get_join_lists()},deep:!0}},methods:{get_join_lists(){this.table_loading=!0,this.$axios.get("/join",{params:{page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{t.data.doc.forEach((t=>{t.detail.forEach((e=>{t[e.name]=e.value}))})),this.table_loading=!1,this.join_items=t.data.doc,this.total_num=t.data.total_num}))}}},ve=fe,be=(0,c.Z)(ve,pe,xe,!1,null,null,null),ke=be.exports;const ye={path:"/xitongguanli",component:nt,children:[{path:"/xitongguanli/xitongshezhi",name:"xitongshezhi",component:$t},{path:"/xitongguanli/shouquanguanli",name:"shouquanguanli",component:Lt},{path:"/xitongguanli/mokuaiguanli",name:"mokuaiguanli",component:Kt},{path:"/xitongguanli/qiyeguanli",name:"qiyeguanli",component:ae},{path:"/xitongguanli/quanxianshezhi",name:"quanxianshezhi",component:re},{path:"/xitongguanli/yonghuguanli",name:"yonghuguanli",component:ge},{path:"/xitongguanli/join",name:"join",component:ke}]};var Ze=ye,we=function(){var t=this,e=t._self._c;return e(zt.Z,{staticClass:"elevation-2",staticStyle:{flex:"1"},attrs:{headers:t.headers,items:t.items,loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(Ft.Z,{attrs:{flat:""}},[e(J.qW,[t._v("小区列表")]),e($.Z),e(jt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary"}},"v-btn",s,!1),a),[t._v(" 新增 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(k.ZB,[e(Z.Z,[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(Nt.Z,{attrs:{items:t.company_items,"item-text":"qiyejiancheng","item-value":"_id",label:"物业公司"},model:{value:t.editedItem.company,callback:function(e){t.$set(t.editedItem,"company",e)},expression:"editedItem.company"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"小区名称"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"小区电话"},model:{value:t.editedItem.phone,callback:function(e){t.$set(t.editedItem,"phone",e)},expression:"editedItem.phone"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"经纬度",disabled:!0},model:{value:t.editedItem.latlng,callback:function(e){t.$set(t.editedItem,"latlng",e)},expression:"editedItem.latlng"}})],1),e(y.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(z.Z,{attrs:{label:"详细地址"},scopedSlots:t._u([{key:"append",fn:function(){return[e(v.Z,{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.get_latlng(t.editedItem.address)}}},[e(L.Z,[t._v("mdi-magnify")])],1)]},proxy:!0}]),model:{value:t.editedItem.address,callback:function(e){t.$set(t.editedItem,"address",e)},expression:"editedItem.address"}}),e("div",{ref:"map_container",staticStyle:{height:"200px"}})],1)],1)],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 保存 ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(L.Z,{staticClass:"mr-2",attrs:{color:"error",small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})},qe=[],Ie={data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},loading:!0,dialog:!1,date_picker_dialog:!1,company_items:[],headers:[{text:"ID",value:"_id"},{text:"物业公司",value:"company.qiyejiancheng"},{text:"小区名称",value:"name"},{text:"详细地址",value:"address"},{text:"经纬度",value:"latlng"},{text:"小区电话",value:"phone"},{text:"编辑/删除",align:"center",value:"actions"}],items:[],editedIndex:-1,editedItem:{company:"",name:"",address:"",latlng:"39.90871879886639, 116.3973701092209",phone:""},defaultItem:{company:"",name:"",address:"",latlng:"39.90871879886639, 116.3973701092209",phone:""},map:null,marker:null}),computed:{formTitle(){return-1===this.editedIndex?"添加":"编辑"}},watch:{dialog(t){t?this.$nextTick((()=>{this.initMap()})):this.close()}},created(){this.getlist(),this.$axios.get("/company/getlist").then((t=>{this.company_items=t.data}))},methods:{getlist(){this.items=[],this.loading=!0,this.$axios.get("/xiaoqu/getlist").then((t=>{setTimeout((()=>{this.loading=!1,this.items=t.data}),1e3)}))},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},deleteItem(t){this.$axios.post("/xiaoqu/del",t).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.error?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))},initMap(){this.map&&this.map.destroy();var t=this.editedItem.latlng?this.editedItem.latlng:"39.90871879886639, 116.3973701092209",e=t.split(",")[0],a=t.split(",")[1];setTimeout((()=>{console.log(this.$refs.map_container);var t=new window.TMap.LatLng(e,a);this.map=new window.TMap.Map(this.$refs.map_container,{center:t,zoom:3}),this.setmarker(),this.map.on("panend",this.panendHandler)}),500)},panendHandler(t){console.log("拖动了");var e="TGYBZ-ISKCF-MSGJM-NZ3ZF-U5QG2-LKF5I",a=t.target.getCenter().getLat(),s=t.target.getCenter().getLng();this.$axios.get("http://localhost:8080/tx/ws/geocoder/v1/?key="+e+"&location="+a+","+s).then((t=>{this.editedItem.address=t.data.result.formatted_addresses.recommend})),this.editedItem.latlng=a+","+s,this.setmarker()},get_latlng(t){var e="TGYBZ-ISKCF-MSGJM-NZ3ZF-U5QG2-LKF5I";this.$axios.get("http://localhost:8080/tx/ws/geocoder/v1/?key="+e+"&address="+t).then((t=>{var e=t.data.result.lat,a=t.data.result.lng;this.editedItem.latlng=e+","+a,this.map.setCenter(t.data.result.location),this.setmarker()}))},setmarker(){this.marker&&(this.marker.setMap(null),this.marker=null),this.marker=new window.TMap.MultiMarker({map:this.map,styles:{marker:new window.TMap.MarkerStyle({width:20,height:30,anchor:{x:10,y:30}})},geometries:[{position:this.map.getCenter(),id:"marker"}]})},save(){this.editedIndex>-1?this.$axios.post("/xiaoqu/update",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}})):this.$axios.post("/xiaoqu/create",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))}}},Ce=Ie,Se=(0,c.Z)(Ce,we,qe,!1,null,null,null),$e=Se.exports,ze=a(7359),je=a(8224),Be=a(5088),Ee=a(3385),Pe=a(7394),De=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(y.Z,{attrs:{cols:"12",sm:"3",md:"3",height:"100%"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v("小区列表")]),e(k.ZB,[e(Ee.Z,{attrs:{"active-class":"primary"},model:{value:t.xiaoqu_selected,callback:function(e){t.xiaoqu_selected=e},expression:"xiaoqu_selected"}},[e(C.Z,t._l(t.xiaoqu_items,(function(a,s){return e(y.Z,{key:s,attrs:{cols:"4",sm:"12",md:"6",lg:"4"}},[e(Be.Z,{scopedSlots:t._u([{key:"default",fn:function({active:s,toggle:i}){return[e(b.Z,{staticClass:"d-flex align-center",attrs:{height:"100"},on:{click:i}},[e("div",{staticClass:"flex-grow-1 text-center"},[e("span",{class:s?"white--text":""},[t._v(t._s(a.name))])])])]}}],null,!0)})],1)})),1)],1)],1)],1)],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6",height:"100%"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu_name)+"楼栋列表")]),e(k.ZB,[e(Ee.Z,{attrs:{"active-class":"primary"},model:{value:t.loudong_selected,callback:function(e){t.loudong_selected=e},expression:"loudong_selected"}},[e(C.Z,[t._l(t.loudong_items,(function(a,s){return e(y.Z,{key:s,attrs:{cols:"4",sm:"6",md:"3",lg:"2"}},[e(je.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:s}){return[e(Be.Z,{scopedSlots:t._u([{key:"default",fn:function({active:i,toggle:o}){return[e(b.Z,{staticClass:"d-flex align-center",attrs:{height:"100"},on:{click:o}},[e("div",{staticClass:"flex-grow-1 text-center"},[e("span",{class:i?"white--text":""},[t._v(t._s(a.name))])]),e(Pe.g3,[s?e("div",{staticClass:"d-flex justify-space-around edit"},[e(L.Z,{attrs:{color:"primary",small:""},on:{click:function(e){return e.stopPropagation(),t.btn_edit_loudong(a)}}},[t._v(" mdi-pencil ")]),e(L.Z,{attrs:{color:"error",small:""},on:{click:function(e){return e.stopPropagation(),t.btn_del_loudong(a)}}},[t._v(" mdi-delete ")])],1):t._e()])],1)]}}],null,!0)})]}}],null,!0)})],1)})),t.xiaoqu_selected||0==t.xiaoqu_selected?e(y.Z,{attrs:{cols:"4",sm:"6",md:"3",lg:"2"}},[e(jt.Z,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(b.Z,t._g(t._b({staticClass:"d-flex align-center",attrs:{height:"100"}},"v-card",s,!1),a),[e("div",{staticClass:"flex-grow-1 text-center"},[t._v("+")])])]}}],null,!1,4154268659),model:{value:t.dialog_edit_loudong,callback:function(e){t.dialog_edit_loudong=e},expression:"dialog_edit_loudong"}},[e(b.Z,[e(k.EB,[t._v(" "+t._s(t.action)+"楼栋 ")]),e(k.ZB,[e(kt.Z,{ref:"form_loudong"},[e(z.Z,{attrs:{autofocus:"",label:"楼栋名称",rules:[t=>!!t||"必填"]},model:{value:t.edit_loudong.name,callback:function(e){t.$set(t.edit_loudong,"name",e)},expression:"edit_loudong.name"}})],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog_edit_loudong=!1}}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save_loudong}},[t._v(" 保存 ")])],1)],1)],1)],1):e(y.Z,[e(ze.Z,{attrs:{type:"error",outlined:"",dense:""}},[t._v("请先点击一个小区！")])],1)],2)],1)],1)],1)],1),e(y.Z,{attrs:{cols:"12",sm:"3",md:"3",height:"100%"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.loudong_name)+"单元列表")]),e(k.ZB,[e(Ee.Z,{attrs:{"active-class":"primary"},model:{value:t.danyuan_selected,callback:function(e){t.danyuan_selected=e},expression:"danyuan_selected"}},[e(C.Z,[t._l(t.danyuan_items,(function(a,s){return e(y.Z,{key:s,attrs:{cols:"4",sm:"12",md:"6",lg:"4"}},[e(je.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:s}){return[e(Be.Z,{scopedSlots:t._u([{key:"default",fn:function({active:i,toggle:o}){return[e(b.Z,{staticClass:"d-flex align-center",attrs:{height:"100"},on:{click:o}},[e("div",{staticClass:"flex-grow-1 text-center"},[e("span",{class:i?"white--text":""},[t._v(t._s(a.name))])]),e(Pe.g3,[s?e("div",{staticClass:"d-flex justify-space-around edit"},[e(L.Z,{attrs:{color:"primary",small:""},on:{click:function(e){return e.stopPropagation(),t.btn_edit_danyuan(a)}}},[t._v(" mdi-pencil ")]),e(L.Z,{attrs:{color:"error",small:""},on:{click:function(e){return e.stopPropagation(),t.btn_del_danyuan(a)}}},[t._v(" mdi-delete ")])],1):t._e()])],1)]}}],null,!0)})]}}],null,!0)})],1)})),t.loudong_selected||0==t.loudong_selected?e(y.Z,{attrs:{cols:"4",sm:"12",md:"6",lg:"4"}},[e(jt.Z,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(b.Z,t._g(t._b({staticClass:"d-flex align-center",attrs:{height:"100"}},"v-card",s,!1),a),[e("div",{staticClass:"flex-grow-1 text-center"},[t._v("+")])])]}}],null,!1,4154268659),model:{value:t.dialog_edit_danyuan,callback:function(e){t.dialog_edit_danyuan=e},expression:"dialog_edit_danyuan"}},[e(b.Z,[e(k.EB,[t._v(" "+t._s(t.action)+"单元 ")]),e(k.ZB,[e(kt.Z,{ref:"form_danyuan"},[e(z.Z,{attrs:{autofocus:"",label:"单元名称",rules:[t=>!!t||"必填"]},model:{value:t.edit_danyuan.name,callback:function(e){t.$set(t.edit_danyuan,"name",e)},expression:"edit_danyuan.name"}})],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog_edit_danyuan=!1}}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save_danyuan}},[t._v(" 保存 ")])],1)],1)],1)],1):e(y.Z,[e(ze.Z,{attrs:{type:"error",outlined:"",dense:""}},[t._v("请先点击一个楼栋！")])],1)],2)],1)],1)],1)],1)],1)},Te=[],Ae={data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},action:"创建",dialog_edit_loudong:!1,dialog_edit_danyuan:!1,xiaoqu_selected:null,loudong_selected:null,danyuan_selected:null,xiaoqu_name:"",loudong_name:"",edit_loudong:{},edit_danyuan:{},xiaoqu_items:[],loudong_items:[],danyuan_items:[]}),mounted(){this.get_xiaoqu_items()},methods:{get_xiaoqu_items(){this.$axios.get("/xiaoqu/getlist").then((t=>{this.xiaoqu_items=t.data}))},get_loudong_list(){var t=this.xiaoqu_items[this.xiaoqu_selected];this.$axios.get("/loudong/getlist",{params:{xiaoqu:t._id}}).then((t=>{console.log(t.data),this.loudong_items=t.data}))},get_danyuan_list(){var t=this.loudong_items[this.loudong_selected];this.$axios.get("/danyuan/getlist",{params:{loudong:t._id}}).then((t=>{console.log(t.data),this.danyuan_items=t.data}))},save_loudong(){if(this.$refs.form_loudong.validate())if("编辑"==this.action)this.$axios.post("/loudong/update",this.edit_loudong).then((t=>{console.log(t),this.dialog_edit_loudong=!1}));else if("创建"==this.action){var t=this.xiaoqu_items[this.xiaoqu_selected];this.$axios.post("/loudong/create",{name:this.edit_loudong.name,xiaoqu:t}).then((t=>{console.log(t),this.dialog_edit_loudong=!1}))}},save_danyuan(){if(this.$refs.form_danyuan.validate())if("编辑"==this.action)this.$axios.post("/danyuan/update",this.edit_danyuan).then((t=>{console.log(t),this.dialog_edit_danyuan=!1}));else if("创建"==this.action){var t=this.loudong_items[this.loudong_selected];this.$axios.post("/danyuan/create",{name:this.edit_danyuan.name,loudong:t}).then((t=>{console.log(t),this.dialog_edit_danyuan=!1}))}},btn_edit_loudong(t){this.dialog_edit_loudong=!0,this.edit_loudong=t,this.action="编辑"},btn_del_loudong(t){this.$axios.post("/loudong/del",t).then((t=>{console.log(t),this.get_loudong_list(),this.dialog_edit_loudong=!1,this.snackbar={show:!0,text:t.data.message,color:t.data.error?"error":"success"}}))},btn_edit_danyuan(t){this.dialog_edit_danyuan=!0,this.edit_danyuan=t,this.action="编辑"},btn_del_danyuan(t){this.$axios.post("/danyuan/del",t).then((t=>{console.log(t),this.get_danyuan_list(),this.dialog_edit_danyuan=!1,this.snackbar={show:!0,text:t.data.message,color:t.data.error?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))}},watch:{dialog_edit_loudong(t){t||(this.$refs.form_loudong.resetValidation(),this.edit_loudong={},this.action="创建",this.get_loudong_list())},dialog_edit_danyuan(t){t||(this.$refs.form_danyuan.resetValidation(),this.edit_danyuan={},this.action="创建",this.get_danyuan_list())},xiaoqu_selected(t){t||0==t?(this.xiaoqu_name=this.xiaoqu_items[t].name,this.get_loudong_list()):(this.xiaoqu_name="",this.loudong_items=[]),this.loudong_selected=null},loudong_selected(t){t||0==t?(this.loudong_name=this.loudong_items[t].name,this.get_danyuan_list()):(this.loudong_name="",this.danyuan_items=[]),this.danyuan_selected=null}}},Me=Ae,Le=(0,c.Z)(Me,De,Te,!1,null,"6eca8772",null),Oe=Le.exports,Ne=function(){var t=this,e=t._self._c;return e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"3",md:"3",height:"100%"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v("楼栋列表")]),e(k.ZB,[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(Nt.Z,{attrs:{items:t.xiaoqu_items,"item-text":"name","item-value":"_id",label:"选择小区"},on:{change:t.change_xiaoqu},model:{value:t.select_xiaoqu,callback:function(e){t.select_xiaoqu=e},expression:"select_xiaoqu"}})],1)],1),e(ze.Z,{directives:[{name:"show",rawName:"v-show",value:0==Object.keys(t.select_xiaoqu).length,expression:"Object.keys(select_xiaoqu).length == 0"}],attrs:{type:"error",outlined:"",dense:""}},[t._v("您还没有选择小区！ ")]),e(Jt.Z,{attrs:{items:t.loudong_items,"item-key":"_id",transition:"",active:t.active,"open-on-click":"",activatable:"",dense:""},on:{"update:active":function(e){t.active=e}}})],1)],1)],1),e(y.Z,{attrs:{cols:"12",sm:"9",md:"9",height:"100%"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.fangwu_items.length)+" 条 "),e(v.Z,{staticClass:"ml-5",attrs:{color:"success",disabled:t.btn_save_all_disabled,small:""},on:{click:t.btn_save}},[t._v("保 存 ")]),e($.Z),e(v.Z,{staticClass:"mr-5",attrs:{color:"error",disabled:0==t.select_fangwu.length,small:""},on:{click:t.btn_del}},[t._v("删 除")]),e(v.Z,{staticClass:"mr-5",attrs:{color:"primary",small:"",disabled:0==t.active.length},on:{click:t.btn_add_single}},[t._v("单个添加")]),e(jt.Z,{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({attrs:{color:"primary",small:"",disabled:0==t.active.length}},"v-btn",s,!1),a),[t._v("批量添加 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[t._v(" 批量生成 ")]),e(k.ZB,[e(Z.Z,[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"3",md:"3"}},[e(z.Z,{attrs:{type:"number",label:"开始楼层"},model:{value:t.editedItem.start_louceng,callback:function(e){t.$set(t.editedItem,"start_louceng",e)},expression:"editedItem.start_louceng"}})],1),e(y.Z,{attrs:{cols:"12",sm:"3",md:"3"}},[e(z.Z,{attrs:{type:"number",label:"结束楼层"},model:{value:t.editedItem.end_louceng,callback:function(e){t.$set(t.editedItem,"end_louceng",e)},expression:"editedItem.end_louceng"}})],1),e(y.Z,{attrs:{cols:"12",sm:"3",md:"3"}},[e(z.Z,{attrs:{type:"number",label:"起始房号"},model:{value:t.editedItem.start_fanghao,callback:function(e){t.$set(t.editedItem,"start_fanghao",e)},expression:"editedItem.start_fanghao"}})],1),e(y.Z,{attrs:{cols:"12",sm:"3",md:"3"}},[e(z.Z,{attrs:{type:"number",label:"结束房号"},model:{value:t.editedItem.end_fanghao,callback:function(e){t.$set(t.editedItem,"end_fanghao",e)},expression:"editedItem.end_fanghao"}})],1),e(y.Z,{attrs:{cols:"12",sm:"3",md:"3"}},[e(z.Z,{attrs:{label:"标识字"},model:{value:t.editedItem.biaoshi,callback:function(e){t.$set(t.editedItem,"biaoshi",e)},expression:"editedItem.biaoshi"}})],1),e(y.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e("span",{staticClass:"primary--text"},[t._v("数量："+t._s(t.count)+" 个")])])],1)],1)],1),e(Ot.Z),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.btn_add_multiple}},[t._v(" 生成 ")])],1)],1)],1)],1),e(k.ZB,[e(zt.Z,{attrs:{"checkbox-color":"error","show-select":"","disable-pagination":"","hide-default-footer":"",height:"68vh",headers:t.headers,items:t.fangwu_items,"disable-sort":"","item-key":"_id",loading:t.loading},scopedSlots:t._u([{key:"item.name",fn:function({item:a}){return[e(z.Z,{attrs:{dense:"",color:"primary",flat:"","solo-inverted":"","hide-details":"auto"},on:{change:function(e){return t.fangwu_change(a)}},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"item.name"}})]}},{key:"item.mianji",fn:function({item:a}){return[e(z.Z,{attrs:{dense:"",color:"primary",flat:"","solo-inverted":"","hide-details":"auto",type:"number"},on:{change:function(e){return t.fangwu_change(a)}},model:{value:a.mianji,callback:function(e){t.$set(a,"mianji",e)},expression:"item.mianji"}})]}},{key:"item.yezhu",fn:function({item:a}){return[e(z.Z,{attrs:{dense:"",color:"primary",flat:"","solo-inverted":"","hide-details":"auto"},on:{change:function(e){return t.fangwu_change(a)}},model:{value:a.yezhu,callback:function(e){t.$set(a,"yezhu",e)},expression:"item.yezhu"}})]}},{key:"item.sex",fn:function({item:a}){return[e(Nt.Z,{attrs:{dense:"",items:t.sex_items,color:"primary",flat:"","solo-inverted":"","hide-details":"auto"},on:{change:function(e){return t.fangwu_change(a)}},model:{value:a.sex,callback:function(e){t.$set(a,"sex",e)},expression:"item.sex"}})]}},{key:"item.phone",fn:function({item:a}){return[e(z.Z,{attrs:{dense:"",color:"primary",flat:"","solo-inverted":"","hide-details":"auto"},on:{change:function(e){return t.fangwu_change(a)}},model:{value:a.phone,callback:function(e){t.$set(a,"phone",e)},expression:"item.phone"}})]}},{key:"item._edited",fn:function({item:a}){return[a._edited?e(L.Z,{attrs:{small:"",color:"error"}},[t._v("mdi-pencil")]):e(L.Z,{attrs:{small:"",color:"success"}},[t._v("mdi-check")])]}}],null,!0),model:{value:t.select_fangwu,callback:function(e){t.select_fangwu=e},expression:"select_fangwu"}})],1)],1)],1)],1)},Fe=[],Je=(a(1703),{data:()=>({active:[],btn_save_all_disabled:!0,btn_del_disabled:!0,select_fangwu:[],sex_items:[{value:0,text:"未知"},{value:1,text:"男性"},{value:2,text:"女性"}],xiaoqu_items:[],loudong_items:[],select_xiaoqu:{},loading:!1,headers:[{text:"名称",width:200,value:"name"},{text:"面积",width:150,value:"mianji"},{text:"业主",width:200,value:"yezhu"},{text:"性别",width:100,value:"sex"},{text:"电话",width:200,value:"phone"},{text:"状态",width:50,value:"_edited"}],fangwu_items:[],dialog:!1,editedItem:{start_louceng:1,end_louceng:1,start_fanghao:1,end_fanghao:1,biaoshi:"号"},count:1}),mounted(){this.get_xiaoqu_list()},watch:{fangwu_items:{handler:function(t){try{t.forEach((t=>{if(t._edited)throw this.btn_save_all_disabled=!1,Error("终端循环：发现有需要修改的房屋");this.btn_save_all_disabled=!0}))}catch(e){console.log(e)}},deep:!0},dialog(t){0==t&&(this.editedItem={start_louceng:1,end_louceng:1,start_fanghao:1,end_fanghao:1,biaoshi:"号"})},editedItem:{handler:function(t){console.log(t);var e=Number(t.start_louceng),a=Number(t.end_louceng),s=Number(t.start_fanghao),i=Number(t.end_fanghao);this.count=(a-e+1)*(i-s+1)},deep:!0},active(t){0==t.length?(this.fangwu_items=[],this.btn_save_all_disabled=!0):this.get_fangwu_list()}},methods:{get_xiaoqu_list(){this.$axios.get("/xiaoqu/getlist").then((t=>{console.log(t.data),this.xiaoqu_items=t.data}))},get_loudong_list(){this.$axios.get("/loudong/get_loudong_danyuan",{params:{xiaoqu:this.select_xiaoqu}}).then((t=>{console.log(t.data),this.loudong_items=t.data}))},get_fangwu_list(){this.loading=!0,this.fangwu_items=[],this.$axios.get("/fangwu/getlist",{params:{danyuan:this.active[0]}}).then((t=>{console.log(t.data),t.data&&(t.data.forEach((t=>{t._edited=!1})),setTimeout((()=>{this.loading=!1,this.fangwu_items=t.data}),1e3))})),this.select_fangwu=[]},change_xiaoqu(){console.log("当前选择的小区为："+this.select_xiaoqu),this.fangwu_items=[],this.get_loudong_list()},btn_add_single(){this.fangwu_items.push({name:"",mianji:0,yezhu:"",sex:0,phone:"",danyuan:this.active[0],_edited:!0})},btn_add_multiple(){var t=Number(this.editedItem.start_louceng),e=Number(this.editedItem.end_louceng),a=Number(this.editedItem.start_fanghao),s=Number(this.editedItem.end_fanghao);for(console.log(this.count),t;t<=e;t++){var i=a,o=s;for(i;i<=o;i++){var n=t+"-"+i+this.editedItem.biaoshi;this.fangwu_items.push({name:n,mianji:0,yezhu:"",sex:0,phone:"",danyuan:this.active[0],_edited:!0})}}this.dialog=!1},async btn_del(){this.fangwu_items=this.fangwu_items.filter((t=>!this.select_fangwu.includes(t)));var t=[];this.select_fangwu.forEach((e=>{e._id&&t.push(e)})),this.$axios.post("/fangwu/delete",t),this.select_fangwu=[]},async btn_save(){var t=[],e=[];this.fangwu_items.forEach((a=>{a._edited&&(a._id?t.push(a):e.push(a))}));const a=this.$axios.post("/fangwu/update",t),s=this.$axios.post("/fangwu/create",e);await Promise.all([a,s]).then((t=>{console.log(t)})),this.get_fangwu_list()},fangwu_change(t){t._edited=!0}}}),Re=Je,Ve=(0,c.Z)(Re,Ne,Fe,!1,null,null,null),Ye=Ve.exports;const Ue={path:"/fangchanguanli",component:nt,children:[{path:"/fangchanguanli/xiaoquguanli",name:"xiaoquguanli",component:$e},{path:"/fangchanguanli/loudongguanli",name:"loudongguanli",component:Oe},{path:"/fangchanguanli/fangwuguanli",name:"fangwuguanli",component:Ye}]};var Xe=Ue,Ke=function(){var t=this,e=t._self._c;return e(zt.Z,{staticClass:"elevation-2",staticStyle:{flex:"1"},attrs:{headers:t.headers,items:t.items,"item-key":"_id"},scopedSlots:t._u([{key:"top",fn:function(){return[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(Ft.Z,{attrs:{flat:""}},[e(J.qW,[t._v("账号列表")]),e(ce.Z,{staticClass:"mx-5",attrs:{rounded:"",dense:"",mandatory:""},model:{value:t.filter_status,callback:function(e){t.filter_status=e},expression:"filter_status"}},[e(v.Z,{attrs:{small:""}},[t._v(" 可用 ")]),e(v.Z,{attrs:{small:""}},[t._v(" 禁用 ")])],1),e($.Z),e(jt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary"}},"v-btn",s,!1),a),[t._v(" 注册 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(k.ZB,[e(Z.Z,[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"账号"},model:{value:t.editedItem.username,callback:function(e){t.$set(t.editedItem,"username",e)},expression:"editedItem.username"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"密码"},model:{value:t.editedItem.password,callback:function(e){t.$set(t.editedItem,"password",e)},expression:"editedItem.password"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"姓名"},model:{value:t.editedItem.nickname,callback:function(e){t.$set(t.editedItem,"nickname",e)},expression:"editedItem.nickname"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(Nt.Z,{attrs:{items:t.company_items,"item-text":"qiyejiancheng","item-value":"_id",label:"企业"},model:{value:t.editedItem.company,callback:function(e){t.$set(t.editedItem,"company",e)},expression:"editedItem.company"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(Nt.Z,{attrs:{items:t.permission_items,"item-text":"name","item-value":"_id",label:"权限"},model:{value:t.editedItem.permission,callback:function(e){t.$set(t.editedItem,"permission",e)},expression:"editedItem.permission"}})],1)],1)],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 保存 ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.status",fn:function({item:a}){return[e(yt.Z,{on:{change:function(e){return t.change_status(a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"item.status"}})]}},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(jt.Z,{attrs:{"v-model":!1,"max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(L.Z,t._g(t._b({staticClass:"mr-2",attrs:{color:"green",small:""},on:{click:function(e){return t.bind_wechat_user(a)}}},"v-icon",i,!1),s),[t._v(" mdi-wechat ")])]}}],null,!0)},[e(b.Z,[e(k.EB,[t._v("微信扫码")]),e(k.ZB,{staticClass:"text-center"},[e("img",{attrs:{src:t.qrcode_img_src}}),e("p",[t._v(t._s(t.qrcode_url))])])],1)],1)]}}],null,!0)})},Qe=[],He=a(2592),We={data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},filter_status:0,dialog:!1,company_items:[],permission_items:[],items:[],editedIndex:-1,editedItem:{username:"",password:"",nickname:"",company:"",permission:"",status:!0},defaultItem:{username:"",password:"",nickname:"",company:"",permission:"",status:!0},qrcode_url:"",qrcode_img_src:""}),computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"},headers(){return[{text:"id",sortable:!1,value:"_id"},{text:"账号",sortable:!1,value:"username"},{text:"密码",sortable:!1,value:"password"},{text:"姓名",sortable:!1,value:"nickname"},{text:"企业",sortable:!1,value:"company.qiyejiancheng"},{text:"权限",sortable:!1,value:"permission.name"},{text:"状态",sortable:!1,value:"status",filter:t=>this.filter_status?!t:t},{text:"绑定微信",sortable:!1,value:"wexinuser"},{text:"编辑/绑定",align:"center",sortable:!1,value:"actions"}]}},watch:{dialog(t){t||this.close()}},created(){this.getlist(),this.$axios.get("/company/getlist").then((t=>{this.company_items=t.data})),this.$axios.get("/permission").then((t=>{this.permission_items=t.data}))},methods:{getlist(){this.$axios.get("/user/lists").then((t=>{this.items=t.data}))},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},change_status(t){this.$axios.post("/user/update",t).then((t=>{this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))},save(){this.editedIndex>-1?this.$axios.post("/user/update",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}})):this.$axios.post("/user/add",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))},bind_wechat_user(t){if(this.qrcode_img_src="",this.qrcode_url="",t.company)if(t.company.mini_appid&&""!=t.company.mini_appid){var e=t.company.mini_appid;let a=this;this.qrcode_url="https://api.dayangtong.cn:8080/"+e+"?pc_user_id="+t._id,He.toDataURL(this.qrcode_url,(function(t,e){a.qrcode_img_src=e}))}else this.qrcode_url="该企业未绑定小程序，无法绑定用户，请联系管理员添加";else this.qrcode_url="该账号未绑定企业，无法绑定用户，请联系管理员添加"}}},Ge=We,ta=(0,c.Z)(Ge,Ke,Qe,!1,null,null,null),ea=ta.exports,aa=function(){var t=this,e=t._self._c;return e(b.Z,{staticStyle:{flex:"1",overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(" 操作日志 ")]),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.items,options:t.options,"server-items-length":t.total_num,loading:t.loading},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"top",fn:function(){},proxy:!0},{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}}],null,!0)})],1)],1)},sa=[],ia={data:()=>({loading:!1,total_num:0,options:{},headers:[{text:"时间",sortable:!1,value:"date"},{text:"小区",sortable:!1,value:"xiaoqu.name"},{text:"房屋",sortable:!1,value:"fangwu.name"},{text:"账号",sortable:!1,value:"user.username"},{text:"姓名",sortable:!1,value:"user.nickname"},{text:"事件",sortable:!1,value:"info"}],items:[]}),watch:{options:{handler(){this.getlist()},deep:!0}},methods:{getlist(){this.loading=!0,this.$axios.get("/log",{params:{page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{setTimeout((()=>{this.loading=!1,this.items=t.data.log_doc,this.total_num=t.data.total_num}),500)}))}}},oa=ia,na=(0,c.Z)(oa,aa,sa,!1,null,null,null),la=na.exports,ra=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e("XiaoquLists",{attrs:{"is-all":!0},on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 授权账号 "+t._s(t.select_user.length)+" 个 "),e($.Z),e(v.Z,{attrs:{color:"primary",small:"",disabled:!t.xiaoqu},on:{click:t.btn_save}},[t._v("保存 ")])],1),e(k.ZB,[e(zt.Z,{attrs:{"show-select":"","checkbox-color":"primary",headers:t.headers,items:t.user_items,"item-key":"_id",loading:t.loading},model:{value:t.select_user,callback:function(e){t.select_user=e},expression:"select_user"}})],1)],1)],1)],1)},ca=[],da=function(){var t=this,e=t._self._c;return e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"3",md:"3"}},[e(b.Z,{staticStyle:{height:"100%",overflow:"auto"}},[e(k.EB,[t._v("小区列表")]),e(k.ZB,[e(Ee.Z,{attrs:{"active-class":"primary"},model:{value:t.xiaoqu_selected,callback:function(e){t.xiaoqu_selected=e},expression:"xiaoqu_selected"}},[e(C.Z,t._l(t.xiaoqu_items,(function(a,s){return e(y.Z,{key:s,attrs:{cols:"4",sm:"12",md:"6",lg:"4"}},[e(Be.Z,{scopedSlots:t._u([{key:"default",fn:function({active:s,toggle:i}){return[e(b.Z,{staticClass:"d-flex align-center",attrs:{height:"100"},on:{click:i}},[e("div",{staticClass:"flex-grow-1 text-center"},[e("span",{class:s?"white--text":""},[t._v(t._s(a.name))])])])]}}],null,!0)})],1)})),1)],1)],1)],1)],1)},ua=[],ha={data:()=>({xiaoqu_items:[],xiaoqu_selected:null}),props:["is-all"],mounted(){this.get_xiaoqu_list()},watch:{xiaoqu_selected(t){t||0==t?this.$emit("select_xiaoqu",this.xiaoqu_items[t]):this.$emit("select_xiaoqu")}},methods:{get_xiaoqu_list(){this.$axios.get("/xiaoqu/getlist?isall="+this.isAll).then((t=>{this.xiaoqu_items=t.data}))}}},_a=ha,ma=(0,c.Z)(_a,da,ua,!1,null,null,null),ga=ma.exports,pa={components:{XiaoquLists:ga},data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},loading:!1,xiaoqu:null,select_user:[],user_items:[],headers:[{text:"账号",sortable:!1,value:"username"},{text:"密码",sortable:!1,value:"password"},{text:"姓名",sortable:!1,value:"nickname"},{text:"企业",sortable:!1,value:"company.qiyejiancheng"},{text:"权限",sortable:!1,value:"permission.name"}]}),methods:{select_xiaoqu(t){this.loading=!0,this.xiaoqu=t,t?(this.get_all_user_list(t),this.get_auth_user_list(t)):(this.loading=!1,this.user_items=[],this.select_user=[])},get_all_user_list(t){this.loading=!0,this.$axios.get("/user/lists",{params:{company:t.company._id}}).then((t=>{setTimeout((()=>{this.loading=!1,this.user_items=t.data}),500)}))},get_auth_user_list(t){this.$axios.get("/xiaoqu/userlists",{params:{xiaoqu:t._id}}).then((t=>{setTimeout((()=>{this.loading=!1,this.select_user=t.data.users}),500)}))},btn_save(){this.xiaoqu.users=this.select_user,this.$axios.post("/xiaoqu/update",this.xiaoqu).then((t=>{this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}}))}}},xa=pa,fa=(0,c.Z)(xa,ra,ca,!1,null,null,null),va=fa.exports;const ba={path:"/zhanghaoguanli",component:nt,children:[{path:"/zhanghaoguanli/zhanghaoliebiao",name:"zhanghaoliebiao",component:ea},{path:"/zhanghaoguanli/logs",name:"log",component:la},{path:"/zhanghaoguanli/quanxianguanli",name:"quanxianguanli",component:va}]};var ka=ba,ya=a(3486),Za=a(5130),wa=a(8419),qa=a(6379),Ia=a(2082),Ca=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(q.Z,{attrs:{value:t.overlay}},[e(I.Z,{attrs:{indeterminate:""}})],1),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"3",md:"3"}},[e(b.Z,{staticClass:"d-flex flex-column",staticStyle:{height:"100%"}},[e(k.EB,[t._v("房屋列表")]),e(k.ZB,{staticClass:"d-flex flex-column",staticStyle:{height:"100%",overflow:"auto"}},[e(Nt.Z,{attrs:{items:t.xiaoqu_items,"item-text":"name","item-value":"_id",label:"选择小区"},on:{change:t.change_xiaoqu},model:{value:t.xiaoqu,callback:function(e){t.xiaoqu=e},expression:"xiaoqu"}}),e(ze.Z,{directives:[{name:"show",rawName:"v-show",value:0==t.loudong_items.length,expression:"loudong_items.length == 0"}],attrs:{type:"error",outlined:"",dense:""}},[t._v("您还没有选择小区！ ")]),e(Jt.Z,{staticStyle:{height:"100%",overflow:"auto"},attrs:{items:t.loudong_items,"item-key":"_id",transition:"","load-children":t.fetchFangwus,active:t.active,"return-object":"","open-on-click":"",dense:"",activatable:""},on:{"update:active":function(e){t.active=e}},scopedSlots:t._u([{key:"prepend",fn:function({item:a}){return[a.xiaoqu?e(L.Z,{attrs:{small:""}},[t._v(" mdi-city ")]):t._e(),a.loudong?e(L.Z,{attrs:{small:""}},[t._v(" mdi-door-open ")]):t._e(),a.danyuan?e(L.Z,{attrs:{small:""}},[t._v(" mdi-home ")]):t._e()]}},{key:"label",fn:function({item:a}){return[a.danyuan?e("span",[t._v(t._s(a.name)+"【"+t._s(a.yezhu)+"】"),a.wx_user.length>0?e(L.Z,{attrs:{color:"success",small:""}},[t._v("mdi-wechat")]):t._e()],1):e("span",[t._v(t._s(a.name))])]}}])})],1)],1)],1),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{staticClass:"d-flex flex-column",staticStyle:{height:"100%"}},[e(k.EB,[t._v(" "+t._s(t.active.length?t.active[0].name:null)+"费用列表 "),e(v.Z,{staticClass:"ml-5",attrs:{color:"warning",disabled:!(1==t.selected_feiyong.length&&"按读表"==t.selected_feiyong[0].feixiang.leixing),small:""},on:{click:t.btn_change_biao}},[t._v("换 表 ")]),e(v.Z,{staticClass:"ml-5",attrs:{color:"error",disabled:0==t.selected_feiyong.length,small:""},on:{click:t.btn_del}},[t._v(" 删 除 ")]),e($.Z),e(jt.Z,{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"ml-5",attrs:{disabled:0==t.selected_feiyong.length,color:"secondary",small:""}},"v-btn",s,!1),a),[t._v("催款书 ")])]}}]),model:{value:t.cuikuan_dialog,callback:function(e){t.cuikuan_dialog=e},expression:"cuikuan_dialog"}},[e(b.Z,[e(k.EB,{staticClass:"text-h4 justify-center pt-10"},[t._v(" 缴费通知书 ")]),e(k.ZB,[e("p",{staticClass:"text-h6"},[t._v("尊敬的业主您好：")]),e("p",{staticClass:"text-h6"},[t._v("衷心感谢广大业主/住户对小区物业服务工作的理解、信任和支持！")]),e("p",{staticClass:"text-h6"},[t._v(" 按时交纳物业费是每位业主的义务，也是物业公司维持日常运营的基本保障。物业费是小区公共秩序维护、环境卫生、公共区域维修，以及电梯、配电、公共照明等设备设施正常运转的根本保障。如您不能按时足额交纳物业费，将会对小区物业管理服务工作造成严重的影响。同时，也侵犯了已交费业主的切身利益。 ")]),e("p",{staticClass:"text-h6"},[t._v("特别提示")]),e("p",{staticClass:"text-h6"},[t._v(" 凡属在质保期内的房屋质量问题，将由房产开发公司严格按照建设部《房屋建筑工程质量保修办法》相关规定统一进行处理。物业公司也将积极协助您与建设单位联系，尽快给予解决。请勿将施工单位应承担的质保责任与物业服务工作混淆。 ")]),e("p",{staticClass:"text-h6"},[t._v("若有不明，请致电物业客服中心咨询。咨询电话：********")]),e("p",{staticClass:"text-h6"},[t._v("我司将随时接受业主的监督，持续改进工作方法，努力提高物业服务品质，竭诚为小区广大业主/住户服务。")]),e("p",{staticClass:"text-h6"},[t._v("再次感谢您的理解与支持！")]),e("p",{staticClass:"text-h6"},[t._v("物业服务中心")]),e("p",{staticClass:"text-h6"},[t._v("2022年6月1日")]),e("p",{staticClass:"text-h6"},[t._v("物业费支出清单")]),e("p",[e(Et.Z,{staticStyle:{margin:"0 auto"},attrs:{width:"250",src:"https://api.dayangtong.cn:8080/uploads/mp_qrcode_img/qr_code_img-1661525036592.png"}})],1)]),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.cuikuan_dialog=!1}}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.print}},[t._v(" 打印 ")])],1)],1)],1),e(v.Z,{staticClass:"ml-5",attrs:{disabled:!t.active.length,small:"",color:"accent"},on:{click:t.refresh}},[t._v("刷 新 ")]),e(jt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"ml-5",attrs:{color:"info",disabled:!t.active.length,small:""}},"v-btn",s,!1),a),[t._v(" 新 增 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[t._v(" "+t._s(t.formTitle)+" ")]),e(k.ZB,[e("div",{staticClass:"d-flex flex-wrap"},t._l(t.feixiang_items,(function(a){return e(ya.Z,{key:a._id,staticClass:"mr-8",attrs:{value:a,disabled:!a.status,label:a.mingcheng},model:{value:t.check_feixiang,callback:function(e){t.check_feixiang=e},expression:"check_feixiang"}})})),1)]),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.create}},[t._v(" 添加 ")])],1)],1)],1)],1),e(k.ZB,{staticClass:"d-flex flex-column",staticStyle:{flex:"1",height:"0"}},[e(zt.Z,{attrs:{headers:t.headers,items:t.feiyong_items,"item-key":"_id",loading:t.loading_feiyong,"show-select":"","hide-default-footer":"","disable-pagination":"",height:"38vh","checkbox-color":"primary"},scopedSlots:t._u([{key:"item.qianfei",fn:function({item:a}){return[e("span",{staticStyle:{color:"red"}},[t._v(t._s(a.qianfei))])]}},{key:"item.start",fn:function({item:a}){return["按读表"==a.feixiang.leixing?e(Za.Z,{attrs:{"return-value":a.start,large:"","cancel-text":"取消","save-text":"更新"},on:{"update:returnValue":function(e){return t.$set(a,"start",e)},"update:return-value":function(e){return t.$set(a,"start",e)},save:function(e){return t.save_start(a)},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[e(z.Z,{attrs:{type:"number"},model:{value:a.start,callback:function(e){t.$set(a,"start",e)},expression:"item.start"}})]},proxy:!0}],null,!0)},[e("span",{staticClass:"blue--text"},[t._v(t._s(a.start))])]):"临时费"==a.feixiang.leixing?e("span",[t._v(t._s(a.start))]):e(Za.Z,{attrs:{"return-value":a.start,large:"","cancel-text":"取消","save-text":"更新"},on:{"update:returnValue":function(e){return t.$set(a,"start",e)},"update:return-value":function(e){return t.$set(a,"start",e)},save:function(e){return t.save_start(a)},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[e(Qt.Z,{attrs:{"no-title":"",scrollable:"",locale:"zh-cn"},model:{value:a.start,callback:function(e){t.$set(a,"start",e)},expression:"item.start"}})]},proxy:!0}],null,!0)},[e("span",{staticClass:"blue--text"},[t._v(t._s(a.start))])])]}},{key:"item.end",fn:function({item:a}){return["按读表"==a.feixiang.leixing?e(Za.Z,{attrs:{"return-value":a.end,large:"","cancel-text":"取消","save-text":"更新"},on:{"update:returnValue":function(e){return t.$set(a,"end",e)},"update:return-value":function(e){return t.$set(a,"end",e)},save:function(e){return t.save_end(a)},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[e(z.Z,{attrs:{type:"number"},model:{value:a.end,callback:function(e){t.$set(a,"end",e)},expression:"item.end"}})]},proxy:!0}],null,!0)},[e("span",{staticClass:"blue--text"},[t._v(t._s(a.end)+" | "+t._s(a.change_time))])]):e("span",[t._v(t._s(a.end))])]}},{key:"item.zhouqi_beishu",fn:function({item:a}){return[e(Za.Z,{attrs:{"return-value":a.zhouqi_beishu,large:"","cancel-text":"取消","save-text":"更新"},on:{save:function(e){return t.save_zhouqi_beishu(a)},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[("按面积"==a.feixiang.leixing||"按户数"==a.feixiang.leixing||a.feixiang.leixing,e(z.Z,{attrs:{type:"number"},model:{value:a.zhouqi_beishu,callback:function(e){t.$set(a,"zhouqi_beishu",e)},expression:"item.zhouqi_beishu"}}))]},proxy:!0}],null,!0)},[e("span",{staticClass:"blue--text"},[t._v(t._s(a.zhouqi_beishu))])])]}},{key:"item.shuliang",fn:function({item:a}){return["临时费"==a.feixiang.leixing||"按户数"==a.feixiang.leixing?e("span",[e(Za.Z,{attrs:{"return-value":a.shuliang,large:"","cancel-text":"取消","save-text":"更新"},on:{"update:returnValue":function(e){return t.$set(a,"shuliang",e)},"update:return-value":function(e){return t.$set(a,"shuliang",e)},save:function(e){return t.save(a)},cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[e(z.Z,{attrs:{type:"number"},model:{value:a.shuliang,callback:function(e){t.$set(a,"shuliang",e)},expression:"item.shuliang"}})]},proxy:!0}],null,!0)},[e("span",{staticClass:"blue--text"},[t._v(t._s(a.shuliang))])])],1):e("span",[t._v(t._s(a.shuliang))])]}},{key:"item.zongji",fn:function({item:e}){return[t._v(" "+t._s(Number(e.zongji).toFixed(2))+" ")]}}],null,!0),model:{value:t.selected_feiyong,callback:function(e){t.selected_feiyong=e},expression:"selected_feiyong"}}),e("div",{staticClass:"mt-2 d-flex justify-space-between",staticStyle:{flex:"1",height:"0"}},[e("div",{staticClass:"mr-5 pa-5 grey lighten-5 rounded caption text-no-wrap",staticStyle:{height:"100%",overflow:"auto",width:"50%",background:"url('/null.png') no-repeat center"}},[e(I.Z,{directives:[{name:"show",rawName:"v-show",value:t.loading_history,expression:"loading_history"}],attrs:{indeterminate:"",color:"primary"}}),t._l(t.history_items,(function(a){return e("div",{key:a._id},[t._v(" "+t._s(a.date)+"@ "),a.user?e("span",[t._v(t._s(a.user.nickname)+" "),a.user.status?t._e():e("span",{staticClass:"red--text"},[t._v("【离职】")])]):e("span",[t._v("微信小程序")]),t._v(" | "+t._s(a.info)+" "),a.shoukuandan?e(v.Z,{attrs:{fab:"",text:"","x-small":"",color:a.shoukuandan.status?"error":"success"},on:{click:function(e){t.shoukuandan_id=a.shoukuandan._id,t.shoukuandan_dialog=!0}}},[t._v(" 查 ")]):t._e(),e(Ot.Z,{staticClass:"mb-1"})],1)}))],2),e("div",{staticClass:"d-flex flex-column",staticStyle:{flex:"1",overflow:"auto"}},[e("div",{staticClass:"pa-4 d-flex justify-space-around blue lighten-5 rounded"},[e("span",{staticClass:"text-button"},[t._v("余额："+t._s(t.active.length?Number(t.active[0].yu_e).toFixed(2):0))]),e(z.Z,{staticClass:"pa-0 mx-10",attrs:{type:"number",placeholder:"负数为支取，正数为预存",disabled:!t.active.length,dense:"","hide-details":""},model:{value:t.text_field_yu_e,callback:function(e){t.text_field_yu_e=e},expression:"text_field_yu_e"}}),e(v.Z,{attrs:{small:"",disabled:!t.active.length},on:{click:t.btn_modify_yu_e}},[t._v("确定")])],1),e("div",[e(qa.Z,{attrs:{row:"",label:"收款方式：",disabled:0==t.selected_feiyong.length},model:{value:t.radio_pay_way,callback:function(e){t.radio_pay_way=e},expression:"radio_pay_way"}},[e(wa.Z,{attrs:{label:"现金",value:"现金",color:"error"}}),e(wa.Z,{attrs:{label:"微信",value:"微信",color:"success"}}),e(wa.Z,{attrs:{label:"支付宝",value:"支付宝",color:"info"}}),e(wa.Z,{attrs:{label:"银行卡",value:"银行卡",color:"warning"}}),e(wa.Z,{attrs:{label:"其他",value:"其他",color:"gray"}})],1)],1),e(Zt.Z,{attrs:{label:"备注","no-resize":"",rows:"2"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}}),e(z.Z,{attrs:{label:"优惠",type:"number"},model:{value:t.youhui,callback:function(e){t.youhui=e},expression:"youhui"}})],1)])],1),e(k.h7,{staticClass:"blue lighten-5"},[e("span",[t._v("【房屋名称："+t._s(t.active.length?t.active[0].name:null)+"】【面积："+t._s(t.active.length?t.active[0].mianji:null)+"】【业主姓名："+t._s(t.active.length?t.active[0].yezhu:null)+"】")]),e(Ia.Z,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"ml-5",attrs:{disabled:!(t.active.length&&t.active[0].wx_user.length),color:"success",loading:t.loading_shouqu},on:{click:t.push}},"v-btn",s,!1),a),[t._v("推送缴费通知 ")])]}}])},[e("div",{staticClass:"pa-2"},[t._v(" 禁止重复推送、频繁推送"),e("br"),t._v(" 1、业主小程序端只会展示欠费项目"),e("br"),t._v(" 2、在备注中可添加欠费的备注信息"),e("br"),t._v(" 3、推送时不允许添加优惠金额(无效) ")])]),e($.Z),e("span",{staticClass:"mr-5"},[t._v("总计:"+t._s(t.total.toFixed(2))+" "),t.youhui&&"0"!=t.youhui?e("span",[t._v("-优惠:"+t._s(Number(t.youhui).toFixed(2)))]):t._e(),t._v(" = "),e("span",{staticClass:"text-h5 font-weight-bold red--text"},[t._v("￥"+t._s((t.total-(t.youhui?t.youhui:0)).toFixed(2)))])]),e(v.Z,{attrs:{"x-large":"",color:"success",disabled:0==t.selected_feiyong.length,loading:t.loading_shouqu},on:{click:t.btn_ok}},[t._v("确认收取")])],1),e(jt.Z,{attrs:{width:"1000"},model:{value:t.shoukuandan_dialog,callback:function(e){t.shoukuandan_dialog=e},expression:"shoukuandan_dialog"}},[e("shoukuandan",{attrs:{shoukuandan_id:t.shoukuandan_id},on:{close:function(e){t.shoukuandan_dialog=!1,t.refresh()}}})],1)],1)],1)],1)},Sa=[],$a=a(9449),za=function(){var t=this,e=t._self._c;return e(b.Z,[e(k.EB,{staticClass:"text-button font-weight-black"},[e(I.Z,{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{indeterminate:"",color:"primary"}}),t._v(" 收款单："+t._s(t.shoukuandan_id)+" "),e($.Z),1==t.skd_info.status?[e("div",{staticClass:"red--text"},[t._v("已撤单："+t._s(t.skd_info.cancel_remark))])]:0==t.skd_info.status?[e(kt.Z,{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(z.Z,{attrs:{placeholder:"撤单说明",dense:"","hide-details":"auto",color:"error",rules:[t=>!!t]},model:{value:t.cancel_remark,callback:function(e){t.cancel_remark=e},expression:"cancel_remark"}})],1),e(v.Z,{staticClass:"ml-5",attrs:{color:"error",small:"",disabled:!t.valid},on:{"~click":function(e){return t.btn_cancel.apply(null,arguments)}}},[t._v(" 撤 单 ")])]:t._e()],2),e(k.ZB,[e("div",{staticStyle:{border:"1px solid #eee",background:"#FFEBEE"}},[e("div",{staticClass:"print pa-4"},[e("div",{staticClass:"text-center text-h6 font-weight-black"},[t._v(" 【"+t._s(t.skd_info.xiaoqu.name)+"】收费凭证")]),e(Ot.Z,{staticClass:"my-1"}),e("div",{staticClass:"d-flex justify-space-between text-button font-weight-black"},[e("span",[t._v("房号："+t._s(t.skd_info.loudong.name+t.skd_info.danyuan.name+t.skd_info.fangwu.name))]),e("span",{class:1==t.skd_info.status?"text-decoration-line-through":""},[t._v("凭证："+t._s(t.skd_info._id))]),e("span",[t._v("业主："+t._s(t.skd_info.fangwu.yezhu))])]),e($a.Z,{staticStyle:{background:"none",border:"thin solid rgba(0, 0, 0, 0.38)"},attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-center"},[t._v("项目")]),e("th",{staticClass:"text-center"},[t._v("单价")]),e("th",{staticClass:"text-center"},[t._v("起数")]),e("th",{staticClass:"text-center"},[t._v("止数")]),e("th",{staticClass:"text-center"},[t._v("周期/倍数")]),e("th",{staticClass:"text-center"},[t._v("数量")]),e("th",{staticClass:"text-center"},[t._v("总计")])])]),e("tbody",t._l(t.skd_info.feiyong,(function(a){return e("tr",{key:a._id},[e("td",{staticClass:"text-center"},[t._v(t._s(a.mingcheng))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.danjia))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.start))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.end))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.zhouqi_beishu))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.shuliang))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.zongji))])])})),0)]},proxy:!0}])}),e("div",[e("div",{staticClass:"d-flex justify-space-between text-button font-weight-black"},[e("span",[t._v("应收：￥"+t._s(t.yingshou)+t._s(0!=t.youhui?" - 优惠：￥"+t.skd_info.youhui:"")+" = 实收：￥"+t._s(t.shishou))]),e("span",[t._v("实收（大写）："+t._s(t.convertCurrency(t.shishou)))])]),e("span",[t._v("备注："+t._s(t.skd_info.remark))]),e("span",{staticClass:"float-right"},[t._v("收费员："+t._s(t.skd_info.user?t.skd_info.user.nickname:"无")+" @ 收费方式："+t._s(t.skd_info.pay_way)+" @ "+t._s(t.skd_info.date_china))])])],1)])]),e(k.h7,[e($.Z),e(v.Z,{attrs:{text:""},on:{click:function(e){return t.$emit("close")}}},[t._v(" 关 闭 ")]),e(v.Z,{attrs:{text:""}},[t._v(" 打 印 ")])],1)],1)},ja=[],Ba={data:()=>({skd_info:{xiaoqu:{},loudong:{},danyuan:{},fangwu:{},user:{}},loading:!1,yingshou:0,youhui:0,shishou:0,cancel_remark:"",valid:!1}),props:{shoukuandan_id:String},watch:{shoukuandan_id(t){this.skd_info={xiaoqu:{},loudong:{},danyuan:{},fangwu:{},user:{}},this.yingshou=0,this.youhui=0,this.shishou=0,this.cancel_remark="",""!=t&&this.get_shoukuandan(t)}},created(){this.get_shoukuandan(this.shoukuandan_id)},methods:{get_shoukuandan(t){this.loading=!0,this.$axios.get("shoukuandan",{params:{_id:t}}).then((t=>{setTimeout((()=>{this.skd_info=t.data,this.yingshou=Number(t.data.total).toFixed(2),this.youhui=Number(t.data.youhui).toFixed(2),this.shishou=(this.yingshou-this.youhui).toFixed(2),this.loading=!1}),500)}))},btn_cancel(){this.$axios.post("/shoukuandan/cancel",{shoukuandan:this.skd_info,remark:this.cancel_remark}).then((t=>{"撤销成功"==t.data.message&&this.get_shoukuandan(this.shoukuandan_id)}))},convertCurrency(t){var e=["角","分"],a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],s=[["元","万","亿"],["","拾","佰","仟"]],i=t<0?"欠":"";t=Math.abs(t);var o="";for(let l=0;l<e.length;l++)o+=(a[Math.floor(10*t*Math.pow(10,l))%10]+e[l]).replace(/零./,"");o=o||"整",t=Math.floor(t);for(let l=0;l<s[0].length&&t>0;l++){var n="";for(let e=0;e<s[1].length&&t>0;e++)n=a[t%10]+s[1][e]+n,t=Math.floor(t/10);o=n.replace(/(零.)*零$/,"").replace(/^$/,"零")+s[0][l]+o}return i+o.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}}},Ea=Ba,Pa=(0,c.Z)(Ea,za,ja,!1,null,null,null),Da=Pa.exports,Ta={data:()=>({snackbar:{show:!1,text:"",color:"success"},overlay:!1,loading_feiyong:!1,loading_history:!1,loading_shouqu:!1,active:[],history_items:[],check_feixiang:[],dialog:!1,cuikuan_dialog:!1,shoukuandan_dialog:!1,shoukuandan_id:"",text_field_yu_e:"",youhui:"",formTitle:"添加",xiaoqu_items:[],loudong_items:[],feixiang_items:[],headers:[{text:"状态",sortable:!1,value:"qianfei"},{text:"类型",sortable:!1,value:"feixiang.leixing"},{text:"名称",sortable:!0,value:"mingcheng"},{text:"单价",sortable:!1,value:"danjia"},{text:"起数",sortable:!1,value:"start"},{text:"止数",sortable:!1,value:"end"},{text:"周期/倍数",sortable:!1,value:"zhouqi_beishu"},{text:"数量",sortable:!1,value:"shuliang"},{text:"总计",sortable:!1,value:"zongji"}],feiyong_items:[],selected_feiyong:[],radio_pay_way:"现金",xiaoqu:"",total:0,remark:""}),components:{shoukuandan:Da},mounted(){this.get_xiaoqu_list()},watch:{active(t){this.selected_feiyong=[],this.history_items=[],this.remark="",this.text_field_yu_e="",0==t.length?(console.log("没有选择房屋"),this.feiyong_items=[]):(console.log("当前选择的房屋ID为"+t[0]._id),this.get_feiyong_lists(t[0]),this.get_history_items(t[0]))},selected_feiyong:{handler:function(t){this.total=0,t.forEach((t=>{this.total=this.total+Number(t.zongji)}))},deep:!0}},methods:{get_feixiang_lists(t){this.$axios.get("/feixiang/lists",{params:{xiaoqu:t}}).then((t=>{this.feixiang_items=t.data}))},get_xiaoqu_list(){this.$axios.get("/xiaoqu/getlist").then((t=>{this.xiaoqu_items=t.data}))},change_xiaoqu(t){this.get_loudong_list(t),this.get_feixiang_lists(t)},get_loudong_list(t){this.$axios.get("/loudong/get_loudong_danyuan",{params:{xiaoqu:t}}).then((t=>{t.data.forEach((t=>{t.children.forEach((t=>{t.children=[]}))})),this.loudong_items=t.data}))},async fetchFangwus(t){const e=t=>new Promise((e=>setTimeout(e,t)));await e(500),await this.$axios.get("fangwu/getlist",{params:{danyuan:t._id,have_wx_user:1}}).then((e=>{t.children.push(...e.data)}))},push(){this.overlay=!0,this.loading_shouqu=!0,this.$axios.post("/feiyong/push",{fangwu:this.active[0],remark:this.remark}).then((t=>{setTimeout((()=>{this.loading_shouqu=!1,this.overlay=!1,this.snackbar={show:!0,text:t.data,color:"success"},this.get_history_items(this.active[0])}),500)}))},print(){},refresh(){this.selected_feiyong=[],this.history_items=[],this.remark="",this.text_field_yu_e="",this.get_feiyong_lists(this.active[0]),this.get_history_items(this.active[0])},get_feiyong_lists(t){this.loading_feiyong=!0,this.feiyong_items=[],this.$axios.get("/feiyong/lists",{params:{fangwu:t._id}}).then((t=>{setTimeout((()=>{this.feiyong_items=t.data,this.loading_feiyong=!1}),500)}))},async get_history_items(t){this.history_items=[];var e=[];this.loading_history=!0;const a=this.$axios.get("/shoukuandan/lists",{params:{fangwu:t._id}}).then((t=>{var a={};t.data.forEach((t=>{a={_id:t._id,date:t.date_china,info:"收取费用"+t.feiyong.length+"条，总计金额："+t.total,user:t.user,shoukuandan:t},e.push(a)}))})),s=this.$axios.get("/log/fangwu",{params:{fangwu:t._id}}).then((t=>{var a={};t.data.forEach((t=>{a={_id:t._id,date:t.date_china,info:t.info,user:t.user},e.push(a)}))}));await Promise.all([a,s]).then((()=>{setTimeout((()=>{e.sort(((t,e)=>new Date(e.date)-new Date(t.date))),this.loading_history=!1,this.history_items=e}),500)}))},btn_change_biao(){this.$axios.post("/feiyong/change_biao",this.selected_feiyong[0]).then((t=>{this.selected_feiyong=[],this.get_feiyong_lists(this.active[0]),this.get_history_items(this.active[0]),this.snackbar={show:!0,text:t.data.message,color:"success"}}))},btn_del(){this.$axios.post("/feiyong/delete",this.selected_feiyong).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"},this.selected_feiyong=[],this.get_feiyong_lists(this.active[0])}))},create(){this.$axios.post("/feiyong/create",{feixiang_obj_arr:this.check_feixiang,fangwu_obj:this.active[0]}).then((t=>{this.check_feixiang=[],this.dialog=!1,this.snackbar={show:!0,text:t.data.message,color:"success"},this.get_feiyong_lists(this.active[0])})).catch((t=>{console.log(t)}))},save_start(t){if("按读表"==t.feixiang.leixing)t.shuliang=(t.end-t.start).toFixed(2),t.zongji=(t.shuliang*t.danjia*t.zhouqi_beishu).toFixed(2);else{var e=new Date(t.start);t.end=this.formatDate(this.addMonthDate(e,Number(t.zhouqi_beishu)))}this.$axios.post("/feiyong/update",t).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"}}))},save_end(t){t.shuliang=(t.end-t.start).toFixed(2),t.zongji=(t.shuliang*t.danjia*t.zhouqi_beishu).toFixed(2),this.$axios.post("/feiyong/update",t).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"}}))},save_zhouqi_beishu(t){if("按读表"==t.feixiang.leixing||"临时费"==t.feixiang.leixing)t.zongji=(t.shuliang*t.danjia*t.zhouqi_beishu).toFixed(2);else{t.zhouqi_beishu=Math.trunc(Number(t.zhouqi_beishu));var e=new Date(t.start);t.end=this.formatDate(this.addMonthDate(e,Number(t.zhouqi_beishu))),t.zongji=(t.shuliang*t.danjia*t.zhouqi_beishu).toFixed(2)}this.$axios.post("/feiyong/update",t).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"}}))},save(t){t.zongji=(Number(t.shuliang)*t.danjia*t.zhouqi_beishu).toFixed(2),this.$axios.post("/feiyong/update",t).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"}}))},cancel(){this.snackbar={show:!0,text:"取消",color:"error"}},open(){console.log("Dialog opened")},close(){console.log("Dialog closed")},btn_modify_yu_e(){this.text_field_yu_e?(this.active[0].yu_e=(Number(this.active[0].yu_e)+Number(this.text_field_yu_e)).toFixed(2),this.$axios.post("/fangwu/update/yu_e",this.active[0]).then((t=>{this.snackbar={show:!0,text:t.data.message,color:"success"},this.text_field_yu_e="",this.get_history_items(this.active[0])}))):this.snackbar={show:!0,text:"余额操作数不能为空",color:"error"}},btn_ok(){this.loading_shouqu=!0,this.overlay=!0;var t={remark:this.remark,total:this.total.toFixed(2),feiyong:this.selected_feiyong,fangwu:this.active[0],pay_way:this.radio_pay_way,youhui:this.youhui};console.log(t),this.$axios.post("/shoukuandan/create",t).then((t=>{this.youhui="",this.remark="",this.selected_feiyong=[],this.get_feiyong_lists(this.active[0]),this.shoukuandan_id=t.data.shoukuandan_doc._id,this.get_history_items(this.active[0]),setTimeout((()=>{this.overlay=!1,this.loading_shouqu=!1,this.shoukuandan_dialog=!0}),2e3)}))},addMonthDate(t,e){return t.setMonth(t.getMonth()+e),t.setDate(t.getDate()-1),t},formatDate(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var s=t.getDate();return s=s<10?"0"+s:s,e+"-"+a+"-"+s}}},Aa=Ta,Ma=(0,c.Z)(Aa,Ca,Sa,!1,null,null,null),La=Ma.exports,Oa=a(4127),Na=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 费项设置 "),e($.Z),e(jt.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",disabled:!t.xiaoqu}},"v-btn",s,!1),a),[t._v(" 新增 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(k.ZB,[e(kt.Z,{ref:"form"},[e(Z.Z,{attrs:{fluid:""}},[e(C.Z,[e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(Nt.Z,{attrs:{items:t.leixing_items,"item-text":"name","item-value":"name",label:"类型",rules:[t=>!!t||"必填"]},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e(Ia.Z,{attrs:{right:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("span",t._g(t._b({},"span",i,!1),s),[t._v(t._s(a.name))])]}}],null,!0)},[e("span",[t._v(t._s(a.info))])])]}}]),model:{value:t.editedItem.leixing,callback:function(e){t.$set(t.editedItem,"leixing",e)},expression:"editedItem.leixing"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{label:"名称",rules:[t=>!!t||"必填"]},model:{value:t.editedItem.mingcheng,callback:function(e){t.$set(t.editedItem,"mingcheng",e)},expression:"editedItem.mingcheng"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{type:"number",suffix:"元",label:"单价",rules:[t=>!!t||"必填"]},model:{value:t.editedItem.danjia,callback:function(e){t.$set(t.editedItem,"danjia",e)},expression:"editedItem.danjia"}})],1),e(y.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(z.Z,{attrs:{type:"number",suffix:"月",disabled:t.disabled_zhouqi,label:"周期",rules:[t=>!!t||"必填",t=>!/[\.]/.test(t)||"整数"]},model:{value:t.editedItem.zhouqi,callback:function(e){t.$set(t.editedItem,"zhouqi",e)},expression:"editedItem.zhouqi"}})],1)],1)],1)],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 保存 ")])],1)],1)],1)],1),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.items,"item-key":"_id",loading:t.loading,height:"66vh"},scopedSlots:t._u([{key:"item.leixing",fn:function({item:a}){return[e(Oa.Z,{attrs:{color:t.getColor(a.leixing),dark:""}},[t._v(" "+t._s(a.leixing)+" ")])]}},{key:"item.zhouqi",fn:function({item:a}){return[e("div",[t._v(t._s("临时费"==a.leixing||"按读表"==a.leixing?"/":a.zhouqi))])]}},{key:"item.status",fn:function({item:a}){return[e(yt.Z,{on:{change:function(e){return t.change_status(a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"item.status"}})]}},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(L.Z,{staticClass:"mr-2",attrs:{color:"error",small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1)],1)],1)},Fa=[],Ja={components:{XiaoquLists:ga},data:()=>({snackbar:{show:!1,text:"",color:"success",site_error:""},dialog:!1,xiaoqu:null,loading:!1,disabled_zhouqi:!1,editedIndex:-1,editedItem:{leixing:"",mingcheng:"",danjia:0,zhouqi:0},defaultItem:{leixing:"",mingcheng:"",danjia:0,zhouqi:0},leixing_items:[{name:"按面积",info:"根据房屋面积进行计费，收取费用后自动生成下个周期的账单，上次缴费日期的次日为下次缴费日期的起日，比如物业费"},{name:"按户数",info:"根据户数进行计费，收取费用后自动生成下个周期的账单，上次缴费日期的次日为下次缴费日期的起日，比如环卫费"},{name:"按读表",info:"根据读表数量进行计费，收取费用后最新的读数自动更新，比如水费、电费"},{name:"取暖费",info:"根据房屋面积进行计费，收取费用过后自动生成下个周期的账单，起日、止日按年轮询"},{name:"临时费",info:"收取费用后不自动生成新账单"}],items:[],headers:[{text:"ID",sortable:!1,value:"_id"},{text:"类型",sortable:!0,value:"leixing"},{text:"名称",sortable:!1,value:"mingcheng"},{text:"状态",sortable:!1,value:"status"},{text:"单价(元)",sortable:!1,value:"danjia"},{text:"周期(月)",sortable:!1,value:"zhouqi"},{text:"操作",sortable:!1,value:"actions"}]}),computed:{formTitle(){return-1===this.editedIndex?"添加":"编辑"}},watch:{dialog(t){t||this.close()},editedItem:{handler:function(t){"临时费"==t.leixing||"按读表"==t.leixing?(t.zhouqi="0",this.disabled_zhouqi=!0):this.disabled_zhouqi=!1},deep:!0}},methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.getlist():this.items=[]},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.$axios.post("/feiyong/del",t).then((t=>{console.log(t),this.close(),this.snackbar={show:!0,text:t.data.message,color:t.data.error?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))},close(){this.dialog=!1,this.$refs.form.resetValidation(),this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},getlist(){this.loading=!0,this.items=[],this.$axios.get("/feixiang/lists",{params:{xiaoqu:this.xiaoqu._id}}).then((t=>{setTimeout((()=>{this.loading=!1,this.items=t.data}),1e3)}))},change_status(t){this.$axios.post("/feixiang/update",t).then((t=>{this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))},save(){this.$refs.form.validate()&&(this.editedIndex>-1?this.$axios.post("/feixiang/update",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}})):(this.editedItem.xiaoqu=this.xiaoqu,console.log(this.editedItem),this.$axios.post("/feixiang/create",this.editedItem).then((t=>{console.log(t),this.close(),this.getlist(),this.snackbar={show:!0,text:t.data.message,color:t.data.errors?"error":"success"}})).catch((t=>{console.log(t),this.snackbar={show:!0,text:t,color:"error"}}))))},getColor(t){return"按面积"==t?"primary":"按户数"==t?"orange":"按读表"==t?"green":"取暖费"==t?"red":"grey"}}},Ra=Ja,Va=(0,c.Z)(Ra,Na,Fa,!1,null,null,null),Ya=Va.exports,Ua=function(){var t=this,e=t._self._c;return e(C.Z,[e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,{staticClass:"flex-nowrap"},[e(Nt.Z,{staticClass:"mx-5",attrs:{disabled:!t.xiaoqu,items:t.feixiang_items,label:"费项","item-text":"mingcheng","item-value":"_id",outlined:"",dense:"","hide-details":""},model:{value:t.feixiang_selected,callback:function(e){t.feixiang_selected=e},expression:"feixiang_selected"}}),e($.Z),e(Nt.Z,{staticClass:"mx-5",attrs:{disabled:!t.xiaoqu,items:t.loudong_items,label:"楼栋","item-text":"name","item-value":"_id",outlined:"",dense:"","hide-details":""},on:{change:t.change_loudong},model:{value:t.loudong_selected,callback:function(e){t.loudong_selected=e},expression:"loudong_selected"}}),e($.Z),e(Nt.Z,{staticClass:"mx-5",attrs:{disabled:0==t.loudong_selected,items:t.danyuan_items,label:"单元","item-text":"name","item-value":"_id",outlined:"",dense:"","hide-details":""},model:{value:t.danyuan_selected,callback:function(e){t.danyuan_selected=e},expression:"danyuan_selected"}}),e($.Z),e(Nt.Z,{staticClass:"mx-5",attrs:{items:t.status_items,label:"类型",outlined:"",dense:"","hide-details":""},model:{value:t.status_selected,callback:function(e){t.status_selected=e},expression:"status_selected"}})],1),e(k.EB,[t._v(" "+t._s(t.xiaoqu?t.xiaoqu.name:"")+" 台账清单 "),e($.Z),e(v.Z,{staticClass:"ml-5",attrs:{color:"primary",disabled:!t.xiaoqu,small:"",loading:t.loading},on:{click:t.search}},[t._v(" 查询 ")]),e(v.Z,{staticClass:"ml-5",attrs:{color:"error",disabled:0==t.feiyong_selected.length,small:""},on:{click:t.btn_del}},[t._v(" 删除 ")])],1),e(k.ZB,[e(zt.Z,{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.feiyong_items,"item-key":"_id",options:t.options,"show-select":t.showselect,loading:t.loading,"server-items-length":t.totalRecord,"disable-sort":"",height:"65vh"},on:{"update:options":function(e){t.options=e}},model:{value:t.feiyong_selected,callback:function(e){t.feiyong_selected=e},expression:"feiyong_selected"}})],1)],1)],1)],1)},Xa=[],Ka={components:{XiaoquLists:ga},data:()=>({xiaoqu:null,options:{},totalRecord:0,loading:!1,feixiang_items:[{_id:0,mingcheng:"全部"}],loudong_items:[{_id:0,name:"全部"}],danyuan_items:[{_id:0,name:"全部"}],status_items:[{value:0,text:"未缴费"},{value:1,text:"已缴费"},{value:2,text:"已撤销"}],feixiang_selected:0,loudong_selected:0,danyuan_selected:0,status_selected:0,feiyong_selected:[],showselect:!1,headers:[{text:"楼栋",value:"loudong.name"},{text:"单元",value:"danyuan.name"},{text:"房屋",value:"fangwu.name"},{text:"名称",value:"mingcheng"},{text:"单价",value:"danjia"},{text:"起数",value:"start"},{text:"止数",value:"end"},{text:"周期/倍数",value:"zhouqi_beishu"},{text:"数量",value:"shuliang"},{text:"总计",value:"zongji"}],feiyong_items:[]}),watch:{options:{handler(){this.search()},deep:!0}},methods:{select_xiaoqu(t){this.feixiang_items=[{_id:0,mingcheng:"全部"}],this.feixiang_selected=0,this.loudong_items=[{_id:0,name:"全部"}],this.loudong_selected=0,this.danyuan_items=[{_id:0,name:"全部"}],this.danyuan_selected=0,this.feiyong_items=[],this.feiyong_selected=[],this.showselect=!1,this.xiaoqu=t,t&&(this.$axios.get("/feixiang/lists",{params:{xiaoqu:t._id}}).then((t=>{this.feixiang_items=[{_id:0,mingcheng:"全部"},...t.data]})),this.$axios.get("/loudong/getlist",{params:{xiaoqu:t._id}}).then((t=>{this.loudong_items=[{_id:0,name:"全部"},...t.data]})))},change_loudong(){this.danyuan_items=[{_id:0,name:"全部"}],this.danyuan_selected=0,0!=this.loudong_selected&&this.$axios.get("/danyuan/getlist",{params:{loudong:this.loudong_selected}}).then((t=>{this.danyuan_items=[{_id:0,name:"全部"},...t.data]}))},search(){this.loading=!0,this.feiyong_selected=[],0==this.status_selected?this.showselect=!0:this.showselect=!1;var t={xiaoqu:this.xiaoqu,feixiang:this.feixiang_selected,loudong:this.loudong_selected,danyuan:this.danyuan_selected,status:this.status_selected,page:this.options.page,itemsPerPage:this.options.itemsPerPage};this.$axios.post("/taizhang",t).then((t=>{setTimeout((()=>{console.log(t.data),this.loading=!1,this.feiyong_items=t.data.doc,this.totalRecord=t.data.totalRecord}),500)}))},btn_del(){this.$axios.post("/feiyong/delete",this.feiyong_selected).then((t=>{console.log(t),this.feiyong_selected=[],this.search()}))}}},Qa=Ka,Ha=(0,c.Z)(Qa,Ua,Xa,!1,null,null,null),Wa=Ha.exports,Ga=function(){var t=this,e=t._self._c;return e(C.Z,[e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 收款单")]),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.skd_items,"item-key":"_id",loading:t.table_loading,options:t.options,"server-items-length":t.total_num,height:"66vh"},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.fanghao",fn:function({item:e}){return[t._v(" "+t._s(e.loudong.name+e.danyuan.name+e.fangwu.name)+" ")]}},{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}},{key:"item.user",fn:function({item:e}){return[t._v(" "+t._s(e.user?e.user.nickname:"无")+" ")]}},{key:"item.status",fn:function({item:a}){return[0==a.status?e(Oa.Z,{attrs:{color:"green",dark:""}},[t._v("已收款")]):t._e(),1==a.status?e(Oa.Z,{attrs:{color:"red",dark:""}},[t._v("已撤销")]):t._e()]}},{key:"item.actions",fn:function({item:a}){return[e(v.Z,{attrs:{color:"primary"},on:{click:function(e){t.shoukuandan_id=a._id,t.shoukuandan_dialog=!0}}},[t._v("详情")])]}}],null,!0)}),e(jt.Z,{attrs:{width:"1000"},model:{value:t.shoukuandan_dialog,callback:function(e){t.shoukuandan_dialog=e},expression:"shoukuandan_dialog"}},[e("shoukuandan",{attrs:{shoukuandan_id:t.shoukuandan_id},on:{close:function(e){t.shoukuandan_dialog=!1}}})],1)],1)],1)],1)],1)},ts=[],es={components:{XiaoquLists:ga,shoukuandan:Da},data:()=>({xiaoqu:null,options:{},total_num:0,loading:!1,table_loading:!1,shoukuandan_dialog:!1,shoukuandan_id:"",skd_items:[],headers:[{text:"日期",sortable:!1,value:"date"},{text:"房号",sortable:!1,value:"fanghao"},{text:"收款单",sortable:!1,value:"_id"},{text:"收款人",sortable:!1,value:"user"},{text:"收款方式",sortable:!1,value:"pay_way"},{text:"金额",sortable:!1,value:"total"},{text:"状态",sortable:!1,value:"status"},{text:"查看",sortable:!1,value:"actions"}]}),watch:{options:{handler(){this.xiaoqu&&this.get_skd_lists()},deep:!0}},methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.get_skd_lists():this.skd_items=[]},get_skd_lists(){this.table_loading=!0,this.$axios.get("/shoukuandan/lists",{params:{xiaoqu:this.xiaoqu._id,page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{setTimeout((()=>{this.table_loading=!1,this.skd_items=t.data.doc,this.total_num=t.data.total_num}),500)}))}}},as=es,ss=(0,c.Z)(as,Ga,ts,!1,null,null,null),is=ss.exports;const os={path:"/feiyongguanli",component:nt,children:[{path:"/feiyongguanli/shouqufeiyong",name:"shouqufeiyong",component:La},{path:"/feiyongguanli/feixiangshezhi",name:"feixiangshezhi",component:Ya},{path:"/feiyongguanli/taizhangtongji",name:"taizhangtongji",component:Wa},{path:"/feiyongguanli/shoukuandan",name:"shoukuandan",component:is}]};var ns=os,ls=function(){var t=this,e=t._self._c;return e(C.Z,[e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 业主列表")]),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.user_items,"item-key":"_id",loading:t.table_loading,options:t.options,"server-items-length":t.total_num,height:"66vh"},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.fanghao",fn:function({item:e}){return[t._v(" "+t._s(e.loudong.name+e.danyuan.name+e.fangwu.name)+" ")]}}],null,!0)})],1)],1)],1)],1)},rs=[],cs={components:{XiaoquLists:ga},data:()=>({xiaoqu:null,options:{},total_num:0,loading:!1,table_loading:!1,user_items:[],headers:[{text:"小程序appid",sortable:!1,value:"appid"},{text:"用户openid",sortable:!1,value:"openid"},{text:"房号",sortable:!1,value:"fanghao"},{text:"姓名",sortable:!1,value:"nickname"},{text:"身份证",sortable:!1,value:"idcard"},{text:"电话",sortable:!1,value:"phone"}]}),watch:{options:{handler(){this.xiaoqu&&this.get_user_lists()},deep:!0}},methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.get_user_lists():this.user_items=[]},get_user_lists(){this.table_loading=!0,this.$axios.get("/wx_user/lists",{params:{xiaoqu:this.xiaoqu._id,page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{setTimeout((()=>{this.table_loading=!1,this.user_items=t.data.user_doc,this.total_num=t.data.total_num}),500)}))}}},ds=cs,us=(0,c.Z)(ds,ls,rs,!1,null,null,null),hs=us.exports;const _s={path:"/yezhuguanli",component:nt,children:[{path:"/yezhuguanli/yezhulists",name:"yezhulists",component:hs}]};var ms=_s,gs=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{attrs:{"min-height":"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 公告列表 "),e($.Z),e(jt.Z,{attrs:{"max-width":"500px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v.Z,t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",disabled:!t.xiaoqu}},"v-btn",s,!1),a),[t._v(" 新增 ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v("发布")])]),e(k.ZB,[e(z.Z,{attrs:{label:"标题"},model:{value:t.notice_title,callback:function(e){t.notice_title=e},expression:"notice_title"}}),e(Zt.Z,{attrs:{label:"内容"},model:{value:t.notice_content,callback:function(e){t.notice_content=e},expression:"notice_content"}}),e(lt.Z,{attrs:{striped:"",value:t.finish,height:"25"}},[e("strong",[t._v(t._s(Math.ceil(t.finish))+"%")])])],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.save}},[t._v(" 保存 ")])],1)],1)],1)],1),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.notice_items,"item-key":"_id",loading:t.table_loading,options:t.options,"server-items-length":t.total_num},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{staticClass:"mr-2",attrs:{color:"error",small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1)],1)],1)},ps=[],xs={components:{XiaoquLists:ga},data:()=>({snackbar:{show:!1,text:"",color:"success"},total_num:0,options:{},notice_title:"",notice_content:"",dialog:!1,loading:!1,table_loading:!1,finish:0,xiaoqu:null,notice_items:[],headers:[{text:"时间",sortable:!1,value:"date"},{text:"标题",sortable:!0,value:"title"},{text:"内容",sortable:!1,value:"content"},{text:"操作",sortable:!1,value:"actions"}]}),watch:{dialog(t){t||this.close()},options:{handler(){this.xiaoqu&&this.get_notice_list()},deep:!0}},methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.get_notice_list():this.notice_items=[]},get_notice_list(){this.table_loading=!0,this.$axios.get("/notice",{params:{xiaoqu:this.xiaoqu._id,page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{setTimeout((()=>{this.table_loading=!1,this.notice_items=t.data.notice_doc,this.total_num=t.data.total_num}),500)}))},close(){this.dialog=!1,this.notice_title="",this.notice_content=""},save(){if(""!=this.notice_title&&""!=this.notice_content){this.loading=!0;var t={xiaoqu:this.xiaoqu,title:this.notice_title,content:this.notice_content,date:new Date};this.$axios.post("/notice",t).then((t=>{var e=setInterval((()=>{this.$axios.post("/notice/finish",t.data).then((t=>{this.finish=t.data.finish,console.log(this.finish),100==this.finish&&(clearInterval(e),setTimeout((()=>{this.dialog=!1,this.finish=0,this.loading=!1,this.get_notice_list()}),500))}))}),1e3)}))}else this.snackbar={show:!0,text:"不允许为空",color:"error"}},deleteItem(t){this.$axios.post("/notice/del",t).then((t=>{this.get_notice_list(),this.snackbar={show:!0,text:t.data,color:"success"}}))}}},fs=xs,vs=(0,c.Z)(fs,gs,ps,!1,null,null,null),bs=vs.exports;const ks={path:"/notice",component:nt,children:[{path:"/notice/lists",name:"notice_lists",component:bs}]};var ys=ks,Zs=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{staticClass:"d-flex",staticStyle:{height:"100%"},attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{staticStyle:{flex:"1",overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 报事报修列表 "),e($.Z),e(jt.Z,{attrs:{"max-width":"500px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",{staticClass:"text-h5"},[t._v("回复")])]),e(k.ZB,[e(Zt.Z,{attrs:{label:"内容",value:"The Woodman set to work at once, aned nearly through."},model:{value:t.reply_content,callback:function(e){t.reply_content=e},expression:"reply_content"}})],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.save}},[t._v(" 回复 ")])],1)],1)],1)],1),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.report_items,"item-key":"_id",loading:t.list_loading,"show-expand":"","single-expand":"",options:t.options,"server-items-length":t.total_num},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}},{key:"item.status",fn:function({item:a}){return[a.reply_date?e("div",{staticStyle:{color:"green"}},[t._v("已处理")]):e("div",{staticStyle:{color:"red"}},[t._v("未处理")])]}},{key:"item.actions",fn:function({item:a}){return[e(L.Z,{staticClass:"mr-2",attrs:{color:"green",small:""},on:{click:function(e){return t.replyItem(a)}}},[t._v(" mdi-reply ")])]}},{key:"expanded-item",fn:function({headers:a,item:s}){return[e("td",{attrs:{colspan:a.length}},[e(C.Z,{staticStyle:{padding:"15px 0"}},t._l(s.images,(function(a){return e(y.Z,{key:a,staticClass:"d-flex child-flex",attrs:{cols:"4"}},[e(Et.Z,{attrs:{src:"https://api.dayangtong.cn:8080/"+a,"aspect-ratio":"1"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[e(C.Z,{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[e(I.Z,{attrs:{indeterminate:""}})],1)]},proxy:!0}],null,!0)})],1)})),1),e("p",[t._v("报事报修内容："+t._s(s.content))]),s.reply_user&&s.reply_content?e("p",[t._v(t._s(new Date(s.reply_date).toLocaleString())+" @ "+t._s(s.reply_user.nickname)+" : "+t._s(s.reply_content))]):t._e()],1)]}}],null,!0)})],1)],1)],1)],1)},ws=[],qs={components:{XiaoquLists:ga},data:()=>({snackbar:{show:!1,text:"",color:"success"},reply_item:{},reply_content:"",dialog:!1,loading:!1,list_loading:!1,total_num:0,options:{},xiaoqu:null,report_items:[],headers:[{text:"时间",sortable:!0,value:"date"},{text:"楼栋",sortable:!1,value:"loudong.name"},{text:"单元",sortable:!1,value:"danyuan.name"},{text:"房屋",sortable:!1,value:"fangwu.name"},{text:"状态",sortable:!1,value:"status"},{text:"操作",sortable:!1,value:"actions"},{value:"data-table-expand"}]}),watch:{dialog(t){t||this.close()},options:{handler(){this.xiaoqu&&this.get_report_list()},deep:!0}},methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.get_report_list():this.report_items=[]},get_report_list(){this.list_loading=!0,this.$axios.get("/report",{params:{xiaoqu:this.xiaoqu._id,page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{setTimeout((()=>{this.list_loading=!1,this.report_items=t.data.report_doc,this.total_num=t.data.total_num}),500)}))},close(){this.dialog=!1,this.loading=!1,this.reply_item={},this.reply_content=""},save(){""!=this.reply_content?(this.loading=!0,this.reply_item.reply_content=this.reply_content,this.reply_item.reply_date=new Date,this.$axios.post("/report/reply",this.reply_item).then((t=>{console.log(t),this.close(),this.get_report_list()}))):this.snackbar={show:!0,text:"不允许为空",color:"error"}},replyItem(t){this.dialog=!0,this.reply_item=t}}},Is=qs,Cs=(0,c.Z)(Is,Zs,ws,!1,null,null,null),Ss=Cs.exports;const $s={path:"/report",component:nt,children:[{path:"/report/lists",name:"report_lists",component:Ss}]};var zs=$s,js=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{attrs:{"min-height":"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 访客记录列表 "),e($.Z),e(v.Z,{attrs:{color:"primary",disabled:!t.xiaoqu},on:{click:t.download_qrcode}},[t._v(" 访客二维码下载 ")]),e(jt.Z,{attrs:{"max-width":"300px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[t._v(" 下载访客二维码 ")]),e(k.ZB,[e("div",{ref:"qrcode",staticStyle:{background:"#1976d2",padding:"20px","text-align":"center","border-radius":"4px"}},[e("div",{staticStyle:{color:"#fff","font-size":"large","font-weight":"bold","line-height":"3"}},[t._v(" "+t._s(t.xiaoqu?t.xiaoqu.name:"")+"访客登记")]),e("img",{attrs:{src:t.qrcode_img_src,alt:t.qrcode_url}})])]),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.download}},[t._v(" 下载 ")])],1)],1)],1)],1),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.items,"item-key":"_id",loading:t.loading,options:t.options,"server-items-length":t.total_num},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}}],null,!0)})],1)],1)],1)],1)},Bs=[],Es=a(1120),Ps=a.n(Es),Ds={components:{XiaoquLists:ga},data:()=>({snackbar:{show:!1,text:"",color:"success"},dialog:!1,loading:!1,total_num:0,options:{},items:[],xiaoqu:null,headers:[{text:"时间",sortable:!0,value:"date"},{text:"姓名",sortable:!1,value:"nickname"},{text:"电话",sortable:!1,value:"phone"},{text:"身份证",sortable:!1,value:"idcard"},{text:"车牌",sortable:!1,value:"plate"},{text:"来访原因",sortable:!1,value:"content"}],qrcode_url:"",qrcode_img_src:""}),watch:{dialog(t){t||this.close()},options:{handler(){this.xiaoqu&&this.get_visitor_lists(this.xiaoqu._id)},deep:!0}},methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.get_visitor_lists(t._id):this.items=[]},close(){this.qrcode_img_src="",this.qrcode_url="",this.dialog=!1},get_visitor_lists(t){this.loading=!0,this.$axios.get("/qrcode/record/get_visitor_lists",{params:{xiaoqu:t,page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{t.data.doc.forEach((t=>{t.detail.forEach((e=>{t[e.name]=e.value}))})),setTimeout((()=>{this.loading=!1,this.items=t.data.doc,this.total_num=t.data.total_num}),500)}))},download_qrcode(){if(this.qrcode_img_src="",this.qrcode_url="",this.dialog=!0,this.xiaoqu.company.mini_appid&&""!=this.xiaoqu.company.mini_appid){var t=this.xiaoqu.company.mini_appid;let e=this;this.qrcode_url="https://api.dayangtong.cn:8080/"+t+"?xiaoqu="+this.xiaoqu._id,He.toDataURL(this.qrcode_url,(function(t,a){e.qrcode_img_src=a}))}else this.qrcode_url="该企业未绑定小程序，无法绑定生成访客二维码，请联系管理员添加"},download(){let t=document.createElement("a");t.setAttribute("download",this.xiaoqu.name+"访客登记"),Ps()(this.$refs.qrcode).then((e=>{t.href=e.toDataURL(),t.click()}))}}},Ts=Ds,As=(0,c.Z)(Ts,js,Bs,!1,null,null,null),Ms=As.exports,Ls=function(){var t=this,e=t._self._c;return e(C.Z,[e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{attrs:{"min-height":"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 点位管理 "),e($.Z),e(v.Z,{attrs:{disabled:!t.xiaoqu,color:"primary"},on:{click:t.add_sheet}},[t._v(" 新增点位 ")]),e(jt.Z,{attrs:{"max-width":"500px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[t._v(" "+t._s(t.dialog_title)+" ")]),e(k.ZB,[e(kt.Z,{ref:"form"},[e(z.Z,{attrs:{autofocus:"",label:"点位名称",rules:[t=>!!t||"必填"]},model:{value:t.edit_qrcode.qrcode_name,callback:function(e){t.$set(t.edit_qrcode,"qrcode_name",e)},expression:"edit_qrcode.qrcode_name"}})],1)],1),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" 确定 ")])],1)],1)],1)],1),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.sheet_items,"item-key":"_id"},scopedSlots:t._u([{key:"item.action",fn:function({item:a}){return[e(v.Z,{attrs:{text:"",small:"",color:"primary"},on:{click:function(e){return t.edit_sheet(a)}}},[t._v(" 编辑 ")]),e(v.Z,{attrs:{text:"",small:"",color:"red"},on:{click:function(e){return t.del_sheet(a)}}},[t._v(" 删除 ")]),e(Ia.Z,{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(v.Z,t._g(t._b({attrs:{color:"success",text:"",small:""},on:{click:function(e){return t.download(a)}}},"v-btn",i,!1),s),[t._v(" 下载二维码 ")])]}}],null,!0)},[e("div",{ref:"qrcode",staticStyle:{background:"#1976d2",padding:"20px","text-align":"center"}},[e("img",{attrs:{src:a.qrcode_img_src}}),e("div",{staticStyle:{color:"#fff","font-size":"large","font-weight":"bold","line-height":"2"}},[t._v(" "+t._s(t.xiaoqu.name)+"巡逻点")]),e("div",{staticStyle:{color:"#fff","line-height":"2"}},[t._v(t._s(a.qrcode_name))])])])]}}],null,!0)})],1)],1)],1)],1)},Os=[],Ns={components:{XiaoquLists:ga},data:()=>({xiaoqu:null,dialog:!1,dialog_title:"",edit_qrcode:{qrcode_name:"",xiaoqu:""},sheet_items:[],headers:[{text:"名称",sortable:!0,value:"qrcode_name"},{text:"操作",sortable:!1,value:"action"}]}),methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.get_sheet_lists(t._id):this.sheet_items=[]},get_sheet_lists(t){this.$axios.get("/qrcode/sheet/lists",{params:{xiaoqu_id:t}}).then((t=>{t.data.forEach((t=>{He.toDataURL("https://api.dayangtong.cn:8080/"+this.xiaoqu.company.mini_appid+"?sheet="+t._id,(function(e,a){t.qrcode_img_src=a}))})),this.sheet_items=t.data}))},add_sheet(){this.dialog=!0,this.dialog_title="新增",this.edit_qrcode.xiaoqu=this.xiaoqu._id},close(){this.dialog=!1,this.edit_qrcode={qrcode_name:"",xiaoqu:""}},save(){this.$refs.form.validate()&&("新增"==this.dialog_title?this.$axios.post("/qrcode/sheet/create",this.edit_qrcode).then((t=>{console.log(t),this.dialog=!1,this.get_sheet_lists(this.xiaoqu._id)})):this.$axios.post("/qrcode/sheet/updata",this.edit_qrcode).then((t=>{console.log(t),this.dialog=!1,this.get_sheet_lists(this.xiaoqu._id)})))},edit_sheet(t){this.dialog=!0,this.edit_qrcode=Object.assign({},t),this.dialog_title="编辑"},del_sheet(t){this.$axios.post("/qrcode/sheet/del",t).then((t=>{console.log(t),this.get_sheet_lists(this.xiaoqu._id)}))},download(t){let e=document.createElement("a");e.setAttribute("download",this.xiaoqu.name+"-"+t.qrcode_name),Ps()(this.$refs.qrcode).then((t=>{e.href=t.toDataURL(),e.click()}))}}},Fs=Ns,Js=(0,c.Z)(Fs,Ls,Os,!1,null,null,null),Rs=Js.exports,Vs=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e("XiaoquLists",{on:{select_xiaoqu:t.select_xiaoqu}}),e(y.Z,{attrs:{cols:"12",sm:"9",md:"9"}},[e(b.Z,{attrs:{"min-height":"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 巡逻记录列表")]),e(k.ZB,{staticStyle:{flex:"1"}},[e(zt.Z,{attrs:{headers:t.headers,items:t.items,"item-key":"_id",loading:t.loading,options:t.options,"server-items-length":t.total_num},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}}],null,!0)})],1)],1)],1)],1)},Ys=[],Us={components:{XiaoquLists:ga},data:()=>({snackbar:{show:!1,text:"",color:"success"},loading:!1,total_num:0,options:{},items:[],xiaoqu:null,headers:[{text:"时间",sortable:!0,value:"date"},{text:"点位",sortable:!0,value:"qrcode_name"},{text:"姓名",sortable:!1,value:"nickname"},{text:"内容",sortable:!1,value:"content"}]}),watch:{options:{handler(){this.xiaoqu&&this.get_record_lists(this.xiaoqu._id)},deep:!0}},methods:{select_xiaoqu(t){this.xiaoqu=t,t?this.get_record_lists(t._id):this.items=[]},get_record_lists(t){this.loading=!0,this.$axios.get("/qrcode/record/get_sheet_lists",{params:{xiaoqu:t,page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{t.data.doc.forEach((t=>{t.detail.forEach((e=>{t[e.name]=e.value}))})),setTimeout((()=>{this.loading=!1,this.items=t.data.doc,this.total_num=t.data.total_num}),500)}))}}},Xs=Us,Ks=(0,c.Z)(Xs,Vs,Ys,!1,null,null,null),Qs=Ks.exports;const Hs={path:"/qrcode",component:nt,children:[{path:"/qrcode/visitor",name:"qrcode_visitor",component:Ms},{path:"/qrcode/sheet",name:"qrcode_sheet",component:Rs},{path:"/qrcode/record",name:"qrcode_record",component:Qs}]};var Ws=Hs,Gs=function(){var t=this,e=t._self._c;return e(C.Z,[e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"12",md:"12"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v(t._s(t.xiaoqu?t.xiaoqu.name:"")+" 用户列表")]),e(k.ZB,[e(zt.Z,{attrs:{headers:t.headers,items:t.user_items,"item-key":"_id",loading:t.table_loading,options:t.options,"server-items-length":t.total_num,height:"66vh"},on:{"update:options":function(e){t.options=e}}})],1)],1)],1)],1)},ti=[],ei={data:()=>({options:{},total_num:0,table_loading:!1,user_items:[],headers:[{text:"小程序",sortable:!1,value:"app[0].authorizer_info.nick_name"},{text:"小程序appid",sortable:!1,value:"appid"},{text:"用户openid",sortable:!1,value:"openid"},{text:"姓名",sortable:!1,value:"nickname"},{text:"身份证",sortable:!1,value:"idcard"},{text:"电话",sortable:!1,value:"phone"},{text:"小区",sortable:!1,value:"xiaoqu[0].name"}]}),watch:{options:{handler(){this.get_user_lists()},deep:!0}},methods:{get_user_lists(){this.table_loading=!0,this.$axios.get("/wx_user/allusers",{params:{page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{setTimeout((()=>{this.table_loading=!1,this.user_items=t.data.user_doc,this.total_num=t.data.total_num}),500)}))}}},ai=ei,si=(0,c.Z)(ai,Gs,ti,!1,null,null,null),ii=si.exports,oi=function(){var t=this,e=t._self._c;return e(C.Z,[e(S.Z,{attrs:{app:"",top:"",timeout:"2000",color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(t._s(t.snackbar.text)+" ")]),e(y.Z,{staticStyle:{height:"100%"},attrs:{cols:"12",sm:"12",md:"12"}},[e(b.Z,{staticStyle:{overflow:"auto"},attrs:{height:"100%"}},[e(k.EB,[t._v("订单列表 "),e($.Z),e(v.Z,{attrs:{color:"primary"},on:{click:t.refresh}},[t._v(" 刷新 ")])],1),e(k.ZB,[e(jt.Z,{attrs:{"max-width":"280px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(b.Z,[e(k.EB,[e("span",[t._v("退款")])]),e(k.ZB,[e("p",{staticClass:"red--text"},[t._v("退款后无法恢复，确定退款么？")])]),e(k.h7,[e($.Z),e(v.Z,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.close}},[t._v(" 取消 ")]),e(v.Z,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:function(e){return t.refunds(t.refunds_item)}}},[t._v(" 确定退款 ")])],1)],1)],1),e(zt.Z,{attrs:{headers:t.headers,items:t.order_items,"item-key":"_id",loading:t.table_loading,options:t.options,"server-items-length":t.total_num,"show-expand":"",height:"66vh"},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.actions",fn:function({item:a}){return["SUCCESS"==a.status?e(v.Z,{attrs:{small:"",text:"",color:"red"},on:{click:function(e){return t.open_dialog(a)}}},[t._v("退款 ")]):t._e()]}},{key:"item.status",fn:function({item:a}){return["SUCCESS"==a.status?e("span",[t._v("支付成功")]):"PROCESSING"==a.status?e("span",[t._v("退款处理中")]):"REFUND"==a.status?e("span",[t._v("已退款")]):e("span",[t._v(t._s(a.status))])]}},{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(new Date(e.date).toLocaleString())+" ")]}},{key:"expanded-item",fn:function({headers:a,item:s}){return[e("td",{attrs:{colspan:a.length}},["REFUND"==s.status?e("p",[t._v(" 已退款： 【退款人："+t._s(s.refund_user.nickname)+" 】【退款时间："+t._s(new Date(s.refund_date).toLocaleString())+" 】【退款到账："+t._s(s.user_received_account)+"】 ")]):t._e(),t._l(s.detail,(function(a,s){return e("p",{key:s},[t._v(" 第"+t._s(s+1)+"条： 【名称："+t._s(a.mingcheng)+" 】【开始："+t._s(a.start)+" 】【结束："+t._s(a.end)+" 】【周期/倍数："+t._s(a.zhouqi_beishu)+" 】【数量："+t._s(a.shuliang)+" 】【单价："+t._s(a.danjia)+" 】【总计："+t._s(a.zongji)+"】 ")])}))],2)]}}],null,!0)})],1)],1)],1)],1)},ni=[],li={data:()=>({snackbar:{show:!1,text:"",color:"success"},refunds_item:null,options:{},total_num:0,loading:!1,table_loading:!1,dialog:!1,order_items:[],headers:[{text:"",value:"data-table-expand"},{text:"订单号",sortable:!1,value:"_id"},{text:"时间",sortable:!1,value:"date"},{text:"小程序appid",sortable:!1,value:"appid"},{text:"用户openid",sortable:!1,value:"openid"},{text:"商户号mchid",sortable:!1,value:"mchid"},{text:"金额",sortable:!1,value:"total"},{text:"类型",sortable:!1,value:"type"},{text:"状态",sortable:!1,value:"status"},{text:"操作",sortable:!1,value:"actions"}]}),watch:{options:{handler(){this.get_order_lists()},deep:!0}},methods:{get_order_lists(){this.table_loading=!0,this.$axios.get("/wechat/order/lists",{params:{page:this.options.page,itemsPerPage:this.options.itemsPerPage}}).then((t=>{setTimeout((()=>{this.table_loading=!1,this.order_items=t.data.doc,this.total_num=t.data.total_num}),500)}))},refresh(){this.get_order_lists()},close(){this.refunds_item=null,this.dialog=!1},open_dialog(t){this.refunds_item=t,this.dialog=!0},refunds(t){this.loading=!0,this.$axios.post("/wechat/pay/order/refunds",t).then((t=>{console.log(t),t.data.message?this.snackbar={show:!0,text:t.data.message,color:"error"}:this.snackbar={show:!0,text:t.data.status,color:"success"},this.get_order_lists(),this.close(),this.loading=!1}))}}},ri=li,ci=(0,c.Z)(ri,oi,ni,!1,null,null,null),di=ci.exports;const ui={path:"/weixin",component:nt,children:[{path:"/weixin/users",name:"weixinuser",component:ii},{path:"/weixin/orders",name:"weixinorder",component:di}]};var hi=ui;s.ZP.use(f.Z);const _i=[{path:"/login",name:"login",component:T},{path:"/",name:"layoutView",component:nt,redirect:"/home",children:[{path:"/home",name:"home",component:bt},...Ze.children,...Xe.children,...ka.children,...ns.children,...hi.children,...ms.children,...ys.children,...zs.children,...Ws.children]}],mi=new f.Z({mode:"history",base:"/",routes:_i});mi.beforeEach(((t,e,a)=>{"login"===t.name||sessionStorage.token||t.path.includes("geocoder")?a():a({name:"login"})}));var gi=mi,pi=a(14);s.ZP.use(pi.ZP);const xi=new pi.ZP.Store({state:{tabs:[]},mutations:{add(t,e){t.tabs.push(e)}}});var fi=xi;s.ZP.config.productionTip=!1,s.ZP.prototype.$axios=x,new s.ZP({vuetify:_,router:gi,store:fi,render:t=>t(u)}).$mount("#app")},2075:function(t,e,a){t.exports=a.p+"img/foot-gfwx01.c68fc891.png"},1784:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/CAYAAABXXxDfAAAQG0lEQVRogc2ae5Ab1ZWHv9tqvaWZ0YzmYRszMeBgbI/N4NeAjROIs9QWC1l2gQQMuwubZAsSIOERBzDlhdqtFEnW6wLHoULCVuxkA0mWgM0jQMBOCFC8E9Yv8Avb4/F7PJZGM5Ja6rt/3G5Nq9WSNbbX5FTdaqn79r3nd865555z+opo1w2MksRoXziFJEfTWa+jjxOsyFx960I0cRlwLtBuPTdHM+lJIs26HgQ+QMpnfVt2/Cz03pqco09NYYgamhfO64M/+s7FX39ixwrawhNHJ99TREJAX2b3kr/rvPX7ty1ebd2VrmsZaV43KQcuDr7z6I1f7Eq+1Dg2OpG0ceKMSgmmhKJ1PRnCHDLQ28Pjr5+e/M2R9398Oxbv1lPPpeoFXjjbxpcfmpczxaPJqI+bZyUhZSgp10sCBTBtwMEsHMqqMYYLkCvCUAGO5keeDRWUMEbjWTQBR/IsPLeFM5sDDBX43uZ1yy+z8DnxlJF7zTs7aYCIx8JPSYv/O2e3seyNAwxnDIgcw11oQoHrz0FEZ9K4CHNPj/HZT8WZ1BoiGdYJaJAz4cCQwZ/3DfO7bWle2zVI394hNWFzEHRN/a5F2QIkgtx7fhsApgmxSOhXt3/l8sTSR1dnUT7JxlUazLnmnSaiAdrmdcuvi0VCP7E7NIU0bnlxD8tX74TTYtWZEkC2CAXJv8xKcs20Zi7sjKH51BQb92XZM2iQKZjEdI3TYn4mdYQASA0XeWFripV/Pswz/3sEYn7QRfWloQnYk+HvLx7Lr6/oJJ0zKVp9s7n8orMuvHmZBd7E5QO8NK/ZLRQMXIuzN3D7rFaWv7ZfmW3Q582QCQwVeOjKCdwyp7V0+67f9bF87V6yhjkiOKlma4zo3HbRWO7/bAdXdSW4qivBt1/q48EXepUFVKN8ESI6i2YrrRumkgeArutXAQ+5OCuJ0V7zwtU0wOfTRJdTKqmcZEIiwPUzW5U5V1v7GYPxnbES8IIJWUPyn28fJJsxoDEAiaBqLUFoCnK0P8cDr+4ja0gMa+O87zNjiLaGlBV5kRDQn+Pz3S3MGhcmk5cl4AA+TXQCPirXvnCCd2K0Ne8D4s6HRUtb3+5pg7hfSd2LciZnJYIl4D4BIb/girMblVrcLkgAfo1v9LQR8guGjJGwIRjyUbJjNxVN0DXu7WlX01b2i6Cs28ZUpi0neCdLPuulsn1NCBjMSya3Bvmb7iT0Z72179fYl1Kv6hoYRUk6WyQkhHd/U4JfY96YCACNQcVWbypP/4EsBD02JSHgcI4ZUxN85lNRho1yrVskLSw+KkVeWvMVzg7wSYlw85ovqn1oydx2nnnnIBhFhdBJDX42Hcoy/Ucf0hDUODxcpC9tcDRbUGbuJk1A3M+Na3by6J8OseDMBtqjfn62/ojSrl+vdHhFCQLun6u0PlyoBC/VOz6gaGGyvb4ApF4NuNU8+RwyJDPHhpnb1cxr7x6CtnBpptJIPsEH21JKqz4N/BqEfEpj0sOMdY1UrsgL7/fzwnuH1UQBDZqClbuKAAZyTDy7kUsnNpAremrdJhuLUwAAwm32uATgSdmCYua+njYriHGF9javtmNr8EPYZ8m7yvq1TJ+WILSE1Hsxv/d2KoG8yT09ysNn8jXjANvhOZ1eCSiUA3d6fE/ShBLAJWfFOWdSk+X5a83vImEByBUVOPe7nvGY49nRPK0T4lw7JYFRpJbWwTvKq/D2bvOvOeSQoaT9r/M6RkKIekkA+SIioEHhOAL74QL3zm0noAsG88ec2O3pKzTvZOuYmgclbaMouXpyI+POjMPAKLR/KMc/zEhy6JtTue2CNmU59VLaIHJajK92t1CsLweo2N9LGFydRkVpa63dd347HFsDI2SYjIv5aY7ojI8HVFhWjwEIAWmDb85uJewXpHNmPUx7LSqgelYHIHRN1ORJEyqI+XJ3C60T4io7q0eEbSG+8/p+Jj+ymW+t64NkqL73MgahMRHunNOqMuEazEnAV+4MKmbwMvvSNRpAJEJazaQqnTPxaXDrzCRkCnUgQG19EjZ9PIhpmJVxghdpAgby3HBekqawT2m9isBMqQKleKDUwTOvrznrjU/uZKggaQ5r+ITwlrRQk319RhJ9TKQ+AZhSxbwN/vpSVlB5fmuIRdb25rkDWhtHc1hDE3Dbs7trDlkT/Mp1e5m2bD0vbU0RDwoaQ1pFmC1Q2m8K+7hpZhIG8sfce0ZNmkpgFna30NnkJ+WhdVNCNKDRGNJ4s3eI7oc3svzF3mojeiY25TQuyrZ9w/zVDzdzx3O9aAJawhqScv9kV6IWX9COrz1cv/nXu8vlitDoVwkVKuJ1DmFKpe2ADx5Yu5eehzbwpx1pGBOtOWxt8KZUzijuZ+mzu5jz2EdsH8iTCGnlJV2htN8W01nY3QJHcrW1rwsYLsJhq2zlq9FXE3A4y+e7mpnaFmIwL8u1bgHvSxf421/tYMlTO1Ui5A65Rw3eFkBQg44wb/VmmLdyK09/lKLBlWnZ2rinpw0Sgeo5OEDKoLszxoprz+TCTzeqml41MkwI6iw+XyUwede6awxpvLo7wwUrt/Dc9jS0h1UoXYcfqcPNgm3n7Y1BTCkJ6VqFYoWAdN7k7GSQK85LKq1Wc8dH8vxTVzM3zUzytRlJtUV6OlOl9bnTm5nfGa0oVoAyjIjuw5QwPh5QFlnncqoPPICA/UdyLJyS4JIzYgx6JBOGpey7Z7epAqdRRfvJIEvfPsCil/u4/9V9qkzlJSdTgia426oIeRQrOJo1mTEmxD9Pb2b7QI3qkgfVD94EdMGXJieASvMDpYVMXjJrXJgF3S3VS10RnZ0Hs3x3zS427clAzKMSLID+HF1TElw6sYGsR74OI9Z99TlNJCM6slB/pFkfeAGk8lzYGWfW2HC1qgkwop175rSpYKbowUxRquJnWxjCundyI4GCqcZhJJGqYM2qLp2TDHL5xEZI1RllUi94y/xu6m4GVNWk6oAChg3JRRNidE9N1C50ViMBDOQ5/dONXHlOE/naxYqSFf7j1AQEatT83LzW1WuoQPvYCNdMVSZ/rKFt4dw9p1Uxcowtp8og3DG7Fd2Hp3/xovmdUSZ3RmGwvjijPvAhnfRAnlt+qyKmlnDteF99rJFcNbmJsyY1qn1fuDoYJhzOqQqwe59PGSQ6Y3x5egsFs3bIULT2eYB/f20/vfuzx/6aZLNRVy9dYwhY/toBrnxyJ/szhVL8XE2pdmlpUU+7itCcZJhEwjp/PTNJIh4of26lrd+Y00YkIEhXSZXteVvCGsMFyfWrd7F43T5SUqraXx1U5z4vQReMbw+xdmea+au28vKOQRqCGpGAtxUo5Uqum5qgxZ3uHsiy+II2nrvmDL578Vg4lBtZSxkD/5gwN5+XrGpdpoSALmgKafxxd4ZZP/mI1VtSTGkNIfx1Jkp1gwewlu601jBHskUW/HATD6zdS9CnzM7Lx6RzkpBfsHhuR3m8H/Xxam+Gt/YM8fLHaYj4RuosA3lu6WkjGfWpBMY1ZlFCIqwR9QseefsQFy7bwIZDWWaMCY8qwBkdeIsMU3JGUwBifpb8cgfXPrEDkxE/4JxbE4rZr57bQmR8TH2mFkAiyPMbBpizYhOPv3dYladBxfutIe60vru5cZhSzSOAr63ZzU2rtoBfY1IyhFGUo/7MP2rwtgAiYR06wvziD3vpfngjHw/kPfP+dM4kEhDcMqvViuEtiYR9qo4f8pW2UvpzXNfdwpi4TionR74pO/L0VM5k/mNbWPHcrlLSZdS5tZ0U8IohqyAxLsYH21L0/HQL63YO0hAUxIMjfsBOORf1tBIaG4GMI4nxiRE/kC1Ac5D753UAULAGMCVErDz9jT1DXPTzrbz64YBKV0exvr3ouMEDVsIjoS1MtiC56jc7WfrmQXRtxA8IVKEzEfZxg53EuIMe62vrF6a3cEZzgLSVwNjbWNAHP37vMJf9cgd7Bw2aOsIj858AnRh4m0zJaXE/4xv83PF8L5ev2spwUZYKH/bX3btmt6ovMTlXEFIoQljnnh6VwBhFWVrfAAuf2MFXnthOa1RnQlMQ8wS07aSTAx5lpvGAxsSOMGvePEjX0vVs7s+RCGn4NUEqZzIhEeCK6c0quLEjF+tr65wpCWaPi5DJS3zCKlBkCsxcvpH/XttHvDVMS0gvLYc6qWZcfSzw9YVKFpkqHFDlrz1DTFu6nsfXHyEeFAR9aqoH5nWowqUd2BRU9fbfrLWOUAWKF7elmfIf63l3SwrGRQjpguLow+QTAj882tkkKCl0hDHyJtf8dAsPvnGAoCXGqe0hFnQ1q2KHJuBIjmmTm1hwRgyAqF/w2Af9XLJqKwMDORgbKcUYoydZ7VOQhGOAFwVj6/FMCShv1RiApiBL/rCPhU/vKiU8953frlJaw4SiLKWtErjp+V5uf6mPaFRXRY7j3MYUD8W9tR67wUvnVQwOPHf8MwOmJBLQmNIa4uktR5n56Ie83jvE/M4o889tgY+OMmlKgi9OaWJzf46ZKzbzyPuHmdQSpCmkn9A2BqAND77iulU2oJfmSwIIrX3yf3AdTRkt2eY6qyPCxn1DzF22nld2pFl16en4Yzr/del4NhzMMm3pet7bnmL22Ah+TWAen52XUeCdtatsNvDYGJ3gKx6KfK7g69121wlzgYoKx7eFQRN8bsUmHn77IN/60pk8tXmAqcs2YOSKRMZEKJijD1O9yHdgzxLf/t1pKnGV/nuZvd1MQIb++Mzvtf79PzgJ/FAoSuXpo36+/3Ifv1h/hAfX7lWOrymIPJH17SDt6OGVoVd+vYZyPHVpvgTcvoZffHylr2/7/Zhm6oQ5s78DxP1sP5hVsX2kvjr7MUnKYd/+Xd8L//bnP2DkyITz9GXZJPY+7gTu1HzRbqHXn30xteXdtwY/t+ALsiExmyLjkDKKFAIpJaaJNE11PkeaNjMgBdI01S37mV2f8FtT2t+bvfpKrHfU+FJK674JUgiKxSFzeKgvk06/s+/361YHe3cecPDuBl5mBSLadYPzJIZutYDVQlYLWi1gsew85APHcbDhJJBTYbaSDCBvtSyQc1zzQMFqJtZRNMkI87akio5WoPwgn93PeazzkyLbQk1GgBVQQrB/2xbgNnvpNHvpGsyWpPtAj0RZh0ml5k+FIKTravNqg81TDt4pgDIhOGN3pwDsA3sFKoHbk7kP9MKpB+/2TYarVQUOlYmLPZiwXnQCc06kM7IMPol1796ZnJq3zd62AFswZcfNodLbOweESuD22rJ9wF+K5qsJwGvNe5o9lAPHetl53zZ3J/BPyuN7gbeVU3Q1z2OS7jXv9OY22VuD11p3e/tTqXn7tzMgcwrBvdbt/jXXPFjHiV0v2N7ddobuU42f1JovC8epjOrcOErkValxdrCdn20VtgCqgT7Vmrf/ewnBCdYztq9WprLBStd/WwBu4J90hOe+VntWRrVqdF4SrlfL/x/CqJX5uP1APe/UVaB0DyY87v+l0Kh4+j8N2+DwiFZ/VAAAAABJRU5ErkJggg=="}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,o){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],i=t[d][1],o=t[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&o||n>=o)&&Object.keys(a.O).every((function(t){return a.O[t](s[r])}))?s.splice(r--,1):(l=!1,o<n&&(n=o));if(l){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,i,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,o,n=s[0],l=s[1],r=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(r)var d=r(a)}for(e&&e(s);c<n.length;c++)o=n[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},s=self["webpackChunkpms_admin_web"]=self["webpackChunkpms_admin_web"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(2901)}));s=a.O(s)})();
//# sourceMappingURL=app.17115cca.js.map